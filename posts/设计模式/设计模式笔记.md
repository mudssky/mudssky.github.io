---
author: 'mudssky'
category: 'è®¾è®¡æ¨¡å¼'
lastUpdated: 1615622092
tags: ['è®¾è®¡æ¨¡å¼','typescript']
createdAt: 1615622092
title: 'è®¾è®¡æ¨¡å¼ç¬”è®°'
---

# design-patterns

- [design-patterns](#design-patterns)
  - [åˆ›é€ è®¾è®¡æ¨¡å¼](#åˆ›é€ è®¾è®¡æ¨¡å¼)
    - [1.ğŸ ç®€å•å·¥å‚æ¨¡å¼(Simple Factory)](#1ç®€å•å·¥å‚æ¨¡å¼simple-factory)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“)
      - [ç»´åŸºç™¾ç§‘æè¿°](#ç»´åŸºç™¾ç§‘æè¿°)
      - [typescript example](#typescript-example)
    - [2.ğŸ­å·¥å‚æ–¹æ³•æ¨¡å¼(Factory Method)](#2å·¥å‚æ–¹æ³•æ¨¡å¼factory-method)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-1)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-1)
      - [ç»´åŸºç™¾ç§‘çš„æè¿°](#ç»´åŸºç™¾ç§‘çš„æè¿°)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹)
      - [ä¼ªä»£ç ](#ä¼ªä»£ç )
      - [typescript example](#typescript-example-1)
    - [3.ğŸ”¨æŠ½è±¡å·¥å‚æ¨¡å¼  Abstract Factory](#3æŠ½è±¡å·¥å‚æ¨¡å¼--abstract-factory)
      - [ç°å®çš„ä¾‹å­:](#ç°å®çš„ä¾‹å­-2)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-2)
      - [ç»´åŸºç™¾ç§‘çš„æè¿°](#ç»´åŸºç™¾ç§‘çš„æè¿°-1)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-1)
      - [typescript example](#typescript-example-2)
    - [4.ğŸ’å•ä¾‹æ¨¡å¼(Singleton)](#4å•ä¾‹æ¨¡å¼singleton)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-3)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-3)
      - [ç»´åŸºç™¾ç§‘çš„æè¿°](#ç»´åŸºç™¾ç§‘çš„æè¿°-2)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-2)
      - [typescript example](#typescript-example-3)
    - [5.ğŸ‘·ç”Ÿæˆå™¨æ¨¡å¼(Builder)](#5ç”Ÿæˆå™¨æ¨¡å¼builder)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-4)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-4)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-3)
      - [typescript example](#typescript-example-4)
    - [6.ğŸ‘åŸå‹æ¨¡å¼(Prototype)](#6åŸå‹æ¨¡å¼prototype)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-5)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-5)
      - [é€‚åˆçš„ä½¿ç”¨åœºæ™¯](#é€‚åˆçš„ä½¿ç”¨åœºæ™¯)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-4)
      - [typescript example](#typescript-example-5)
  - [ç»“æ„è®¾è®¡æ¨¡å¼](#ç»“æ„è®¾è®¡æ¨¡å¼)
    - [1.â˜• è£…é¥°å™¨æ¨¡å¼ï¼ˆDecoratorï¼‰](#1-è£…é¥°å™¨æ¨¡å¼decorator)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-6)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-6)
      - [ç»´åŸºç™¾ç§‘çš„è§£é‡Š](#ç»´åŸºç™¾ç§‘çš„è§£é‡Š)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-5)
      - [typescript example](#typescript-example-6)
    - [2.ğŸ”Œ é€‚é…å™¨æ¨¡å¼(Adapter)](#2-é€‚é…å™¨æ¨¡å¼adapter)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-7)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-7)
      - [ç»´åŸºç™¾ç§‘çš„æè¿°](#ç»´åŸºç™¾ç§‘çš„æè¿°-3)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-6)
      - [typescript example](#typescript-example-7)
    - [3.ğŸ“¦ å¤–è§‚æ¨¡å¼(Facade)](#3-å¤–è§‚æ¨¡å¼facade)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-8)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-8)
      - [ç»´åŸºç™¾ç§‘çš„æè¿°](#ç»´åŸºç™¾ç§‘çš„æè¿°-4)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-7)
      - [typescript example](#typescript-example-8)
    - [4.ğŸŒ¿ç»„åˆæ¨¡å¼ (Composite)](#4ç»„åˆæ¨¡å¼-composite)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-9)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-9)
      - [ç»´åŸºç™¾ç§‘çš„è§£é‡Š](#ç»´åŸºç™¾ç§‘çš„è§£é‡Š-1)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-8)
      - [typescript example](#typescript-example-9)
    - [5.ğŸ± ä»£ç†æ¨¡å¼(Proxy)](#5-ä»£ç†æ¨¡å¼proxy)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-10)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-10)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-9)
      - [ä¸å…¶ä»–æ¨¡å¼çš„è”ç³»](#ä¸å…¶ä»–æ¨¡å¼çš„è”ç³»)
      - [typescript example](#typescript-example-10)
    - [6.ğŸš¡ æ¡¥æ¥æ¨¡å¼(Bridge)](#6-æ¡¥æ¥æ¨¡å¼bridge)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-11)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-11)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-10)
      - [typescript example](#typescript-example-11)
    - [7.ğŸƒäº«å…ƒæ¨¡å¼(Flyweight)](#7äº«å…ƒæ¨¡å¼flyweight)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-12)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-12)
      - [ç»´åŸºç™¾ç§‘çš„è§£é‡Š](#ç»´åŸºç™¾ç§‘çš„è§£é‡Š-2)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-11)
      - [typescript example](#typescript-example-12)
  - [è¡Œä¸ºè®¾è®¡æ¨¡å¼](#è¡Œä¸ºè®¾è®¡æ¨¡å¼)
    - [1.ğŸ’¡ç­–ç•¥æ¨¡å¼(Strategy)](#1ç­–ç•¥æ¨¡å¼strategy)
      - [ç°å®ä¾‹å­](#ç°å®ä¾‹å­)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-13)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-12)
      - [typescript example](#typescript-example-13)
      - [golang example](#golang-example)
      - [dart example](#dart-example)
    - [2.ğŸ˜è§‚å¯Ÿè€…æ¨¡å¼(Observer)](#2è§‚å¯Ÿè€…æ¨¡å¼observer)
      - [ç°å®ä¾‹å­](#ç°å®ä¾‹å­-1)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-14)
      - [ç»´åŸºç™¾ç§‘çš„æè¿°](#ç»´åŸºç™¾ç§‘çš„æè¿°-5)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-13)
      - [typescript example](#typescript-example-14)
      - [dart example](#dart-example-1)
      - [golang example](#golang-example-1)
    - [3.ğŸ‘®å‘½ä»¤æ¨¡å¼(Command)](#3å‘½ä»¤æ¨¡å¼command)
      - [çœŸå®ä¸–ç•Œçš„ä¾‹å­](#çœŸå®ä¸–ç•Œçš„ä¾‹å­)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-15)
      - [ç»´åŸºç™¾ç§‘çš„è§£é‡Š](#ç»´åŸºç™¾ç§‘çš„è§£é‡Š-3)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-14)
      - [typescript example](#typescript-example-15)
    - [4.ğŸ“’ æ¨¡æ¿æ–¹æ³•(Template Method)](#4-æ¨¡æ¿æ–¹æ³•template-method)
      - [çœŸå®ä¸–ç•Œçš„ä¾‹å­](#çœŸå®ä¸–ç•Œçš„ä¾‹å­-1)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-16)
      - [ç»´åŸºç™¾ç§‘çš„æè¿°](#ç»´åŸºç™¾ç§‘çš„æè¿°-6)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-15)
      - [typescript example](#typescript-example-16)
    - [5.â¿è¿­ä»£å™¨æ¨¡å¼ (Iterator)](#5è¿­ä»£å™¨æ¨¡å¼-iterator)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-13)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-17)
      - [ç»´åŸºç™¾ç§‘çš„è§£é‡Š](#ç»´åŸºç™¾ç§‘çš„è§£é‡Š-4)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-16)
      - [typescript example](#typescript-example-17)
    - [6.ğŸ’¢ çŠ¶æ€æ¨¡å¼(State)](#6-çŠ¶æ€æ¨¡å¼state)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-14)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-18)
      - [ç»´åŸºç™¾ç§‘çš„è§£é‡Š](#ç»´åŸºç™¾ç§‘çš„è§£é‡Š-5)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-17)
      - [ä¸å…¶ä»–æ¨¡å¼çš„å…³ç³»](#ä¸å…¶ä»–æ¨¡å¼çš„å…³ç³»)
      - [typescript example](#typescript-example-18)
    - [7.ğŸ”—è´£ä»»é“¾æ¨¡å¼ Chain of Responsibility](#7è´£ä»»é“¾æ¨¡å¼-chain-of-responsibility)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-15)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-19)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-18)
      - [typescript example](#typescript-example-19)
    - [8.ğŸ‘½ä¸­ä»‹è€…æ¨¡å¼(Mediator)](#8ä¸­ä»‹è€…æ¨¡å¼mediator)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-16)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-20)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-19)
      - [typescript example](#typescript-example-20)
    - [9.ğŸ’¾å¤‡å¿˜å½•æ¨¡å¼(Memento)](#9å¤‡å¿˜å½•æ¨¡å¼memento)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-17)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-21)
      - [é€‚åˆçš„ä½¿ç”¨åœºæ™¯](#é€‚åˆçš„ä½¿ç”¨åœºæ™¯-1)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-20)
      - [typescript example](#typescript-example-21)
    - [10.ğŸƒè®¿é—®è€…æ¨¡å¼(Visitor)](#10è®¿é—®è€…æ¨¡å¼visitor)
      - [ç°å®çš„ä¾‹å­](#ç°å®çš„ä¾‹å­-18)
      - [ç®€å•æ€»ç»“](#ç®€å•æ€»ç»“-22)
      - [ä¼˜ç¼ºç‚¹](#ä¼˜ç¼ºç‚¹-21)
      - [typescript example](#typescript-example-22)


è®¾è®¡æ¨¡å¼çš„ç±»å‹

- åˆ›é€ å‹ ï¼ˆCreationalï¼‰

- ç»“æ„å‹ï¼ˆStructuralï¼‰

- è¡Œä¸ºå‹ï¼ˆBehavioralï¼‰

## åˆ›é€ è®¾è®¡æ¨¡å¼

åˆ›é€ å‹è®¾è®¡æ¨¡å¼çš„å…³æ³¨ç‚¹æ˜¯å¦‚ä½•å®ä¾‹åŒ–ä¸€ä¸ªæˆ–æ˜¯ä¸€ç»„å…³è”çš„å¯¹è±¡ã€‚

åˆ›é€ å‹æœ‰ä¸‹é¢å‡ ä¸ªä¾‹å­

- Simple Factory
- Factory Method
- Abstract Factory
- Builder
- Prototype
- Singleton

### 1.ğŸ ç®€å•å·¥å‚æ¨¡å¼(Simple Factory)

#### ç°å®çš„ä¾‹å­

æƒ³è±¡ä½ è¦é€ ä¸€æ‰€æˆ¿å­ï¼Œä½ éœ€è¦ä¸€äº›é—¨ï¼Œä½ å¯ä»¥è‡ªå·±å‡†å¤‡æœ¨å¤´,èƒ¶æ°´,ä½ çš„æœ¨åŒ è£…å¤‡ç­‰ç­‰ï¼Œä½ ä¹Ÿå¯ä»¥æŠŠå·¥ä½œå¤–åŒ…ç»™å·¥å‚ï¼Œè®©å¤–åŒ…åˆ¶é€ å¥½é—¨ç›´æ¥äº¤ä»˜ç»™ä½ ï¼Œè¿™æ ·ä½ å°±ä¸ç”¨äº†è§£åˆ¶é€ é—¨çš„ç»†èŠ‚äº†ï¼Œä¹Ÿä¸ä¼šå› ä¸ºåœ¨å®¶é‡Œæ–½å·¥è€Œæå¾—ä¸€å›¢ç³Ÿã€‚

#### ç®€å•æ€»ç»“

ç®€å•å·¥å‚æ¨¡å¼å°è£…äº†ç”Ÿæˆå®ä¾‹çš„æ–¹æ³•ï¼Œè¿™æ ·ç”¨æˆ·å°±å¯ä»¥ç›´æ¥è°ƒç”¨è¿™ä¸ªæ–¹æ³•ï¼Œä¸éœ€è¦çŸ¥é“åˆ›é€ å®ä¾‹çš„é€»è¾‘ã€‚

(ç®€å•å·¥å‚å®é™…ä¸Šä¸ç®—æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼,ç›¸å¯¹äºåç»­ä»‹ç»çš„å·¥å‚æ–¹æ³•æ¥è¯´.)

#### ç»´åŸºç™¾ç§‘æè¿°

åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹(OOP)ä¸­ï¼Œå·¥å‚æ˜¯ç”¨äºåˆ›å»ºå…¶ä»–å¯¹è±¡çš„å¯¹è±¡ï¼Œå½¢å¼ä¸Šå·¥å‚æ˜¯ä¸€ä¸ªå‡½æ•°æˆ–æ–¹æ³•ï¼Œå®ƒä»æŸä¸ªæ–¹æ³•è°ƒç”¨ä¸­è¿”å›ä¸åŒåŸå‹æˆ–ç±»çš„å¯¹è±¡ï¼ˆè¿™æ ·æˆ‘ä»¬å°±ä¸ç”¨newè¿™äº›å¯¹è±¡æ¥æ‰‹åŠ¨åˆ›å»ºäº†ï¼‰

#### typescript example

```typescript
interface Door {
  getWidth(): number
  getHeight(): number
}
class WoodenDoor implements Door {
  protected width: number
  protected height: number
  constructor(width: number, height: number) {
    this.width = width
    this.height = height
  }
  getWidth(): number {
    return this.width
  }
  getHeight(): number {
    return this.height
  }
  deescribe() {
    console.log(`width:${this.getWidth()},height:${this.getHeight()}`)
  }
}
class DoorFactory {
  static makeDoor(width: number, height: number): WoodenDoor {
    return new WoodenDoor(width, height)
  }
}

const door = DoorFactory.makeDoor(100, 200)
door.deescribe()
const door2 = DoorFactory.makeDoor(300, 500)
door2.deescribe()

```



### 2.ğŸ­å·¥å‚æ–¹æ³•æ¨¡å¼(Factory Method)

**äº¦ç§°ï¼š** è™šæ‹Ÿæ„é€ å‡½æ•°ã€Virtual Constructor

#### ç°å®çš„ä¾‹å­

è€ƒè™‘ä¸€ä¸ªHRæ‹›äººé¢è¯•çš„ä¾‹å­,ä¸å¯èƒ½æ¯ä¸ªèŒä½éƒ½ç”±ä¸€ä¸ªäººæ¥é¢è¯•ã€‚æ ¹æ®èŒä½ç©ºç¼ºï¼Œå¥¹å¿…é¡»å†³å®šå¹¶æŠŠé¢è¯•æ­¥éª¤å§”æ´¾ç»™ä¸åŒçš„äººã€‚

#### ç®€å•æ€»ç»“

å·¥å‚æ–¹æ³•æ¨¡å¼æä¾›äº†ä¸€ç§å°†å®ä¾‹åŒ–é€»è¾‘å§”æ‰˜ç»™å­ç±»çš„æ–¹æ³•ã€‚

#### ç»´åŸºç™¾ç§‘çš„æè¿°

åœ¨åŸºäºç±»çš„ç¼–ç¨‹ä¸­ï¼Œå·¥å‚æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§åˆ›å»ºå·¥å‚æ–¹æ³•çš„åˆ›å»ºæ¨¡å¼ï¼Œå¯ä»¥å¤„ç†åˆ›å»ºå¯¹è±¡çš„é—®é¢˜è€Œæ— éœ€æŒ‡å®šå°†åˆ›å»ºçš„å¯¹è±¡çš„ç¡®åˆ‡ç±»åˆ«ã€‚ è¿™æ˜¯é€šè¿‡é€šè¿‡è°ƒç”¨åœ¨æ¥å£ä¸­æŒ‡å®šçš„å·¥å‚æ–¹æ³•æ¥åˆ›å»ºå¯¹è±¡æ¥å®Œæˆå¯¹è±¡ï¼Œå¹¶ç”±å­ç±»å®ç°ï¼Œæˆ–è€…åœ¨åŸºç±»ä¸­å®ç°ï¼Œå¹¶ä¸”å¯é€‰åœ°ç”±æ´¾ç”Ÿç±»è¦†ç›– - è€Œä¸æ˜¯é€šè¿‡è°ƒç”¨æ„é€ å‡½æ•°ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  ä½ å¯ä»¥é¿å…åˆ›å»ºè€…å’Œå…·ä½“äº§å“ä¹‹é—´çš„ç´§å¯†è€¦åˆã€‚
-  *å•ä¸€èŒè´£åŸåˆ™*ã€‚ ä½ å¯ä»¥å°†äº§å“åˆ›å»ºä»£ç æ”¾åœ¨ç¨‹åºçš„å•ä¸€ä½ç½®ï¼Œ ä»è€Œä½¿å¾—ä»£ç æ›´å®¹æ˜“ç»´æŠ¤ã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ æ— éœ€æ›´æ”¹ç°æœ‰å®¢æˆ·ç«¯ä»£ç ï¼Œ ä½ å°±å¯ä»¥åœ¨ç¨‹åºä¸­å¼•å…¥æ–°çš„äº§å“ç±»å‹ã€‚

**ç¼ºç‚¹**

-  åº”ç”¨å·¥å‚æ–¹æ³•æ¨¡å¼éœ€è¦å¼•å…¥è®¸å¤šæ–°çš„å­ç±»ï¼Œ ä»£ç å¯èƒ½ä¼šå› æ­¤å˜å¾—æ›´å¤æ‚ã€‚ æœ€å¥½çš„æƒ…å†µæ˜¯å°†è¯¥æ¨¡å¼å¼•å…¥åˆ›å»ºè€…ç±»çš„ç°æœ‰å±‚æ¬¡ç»“æ„ä¸­ã€‚

#### ä¼ªä»£ç 

```javascript
// åˆ›å»ºè€…ç±»å£°æ˜çš„å·¥å‚æ–¹æ³•å¿…é¡»è¿”å›ä¸€ä¸ªäº§å“ç±»çš„å¯¹è±¡ã€‚åˆ›å»ºè€…çš„å­ç±»é€šå¸¸ä¼šæä¾›
// è¯¥æ–¹æ³•çš„å®ç°ã€‚
class Dialog is
    // åˆ›å»ºè€…è¿˜å¯æä¾›ä¸€äº›å·¥å‚æ–¹æ³•çš„é»˜è®¤å®ç°ã€‚
    abstract method createButton():Button

    // è¯·æ³¨æ„ï¼Œåˆ›å»ºè€…çš„ä¸»è¦èŒè´£å¹¶éæ˜¯åˆ›å»ºäº§å“ã€‚å…¶ä¸­é€šå¸¸ä¼šåŒ…å«ä¸€äº›æ ¸å¿ƒä¸šåŠ¡
    // é€»è¾‘ï¼Œè¿™äº›é€»è¾‘ä¾èµ–äºç”±å·¥å‚æ–¹æ³•è¿”å›çš„äº§å“å¯¹è±¡ã€‚å­ç±»å¯é€šè¿‡é‡å†™å·¥å‚æ–¹
    // æ³•å¹¶ä½¿å…¶è¿”å›ä¸åŒç±»å‹çš„äº§å“æ¥é—´æ¥ä¿®æ”¹ä¸šåŠ¡é€»è¾‘ã€‚
    method render() is
        // è°ƒç”¨å·¥å‚æ–¹æ³•åˆ›å»ºä¸€ä¸ªäº§å“å¯¹è±¡ã€‚
        Button okButton = createButton()
        // ç°åœ¨ä½¿ç”¨äº§å“ã€‚
        okButton.onClick(closeDialog)
        okButton.render()


// å…·ä½“åˆ›å»ºè€…å°†é‡å†™å·¥å‚æ–¹æ³•ä»¥æ”¹å˜å…¶æ‰€è¿”å›çš„äº§å“ç±»å‹ã€‚
class WindowsDialog extends Dialog is
    method createButton():Button is
        return new WindowsButton()

class WebDialog extends Dialog is
    method createButton():Button is
        return new HTMLButton()


// äº§å“æ¥å£ä¸­å°†å£°æ˜æ‰€æœ‰å…·ä½“äº§å“éƒ½å¿…é¡»å®ç°çš„æ“ä½œã€‚
interface Button is
    method render()
    method onClick(f)

// å…·ä½“äº§å“éœ€æä¾›äº§å“æ¥å£çš„å„ç§å®ç°ã€‚
class WindowsButton implements Button is
    method render(a, b) is
        // æ ¹æ® Windows æ ·å¼æ¸²æŸ“æŒ‰é’®ã€‚
    method onClick(f) is
        // ç»‘å®šæœ¬åœ°æ“ä½œç³»ç»Ÿç‚¹å‡»äº‹ä»¶ã€‚

class HTMLButton implements Button is
    method render(a, b) is
        // è¿”å›ä¸€ä¸ªæŒ‰é’®çš„ HTML è¡¨è¿°ã€‚
    method onClick(f) is
        // ç»‘å®šç½‘ç»œæµè§ˆå™¨çš„ç‚¹å‡»äº‹ä»¶ã€‚


class Application is
    field dialog: Dialog

    // ç¨‹åºæ ¹æ®å½“å‰é…ç½®æˆ–ç¯å¢ƒè®¾å®šé€‰æ‹©åˆ›å»ºè€…çš„ç±»å‹ã€‚
    method initialize() is
        config = readApplicationConfigFile()

        if (config.OS == "Windows") then
            dialog = new WindowsDialog()
        else if (config.OS == "Web") then
            dialog = new WebDialog()
        else
            throw new Exception("é”™è¯¯ï¼æœªçŸ¥çš„æ“ä½œç³»ç»Ÿã€‚")

    // å½“å‰å®¢æˆ·ç«¯ä»£ç ä¼šä¸å…·ä½“åˆ›å»ºè€…çš„å®ä¾‹è¿›è¡Œäº¤äº’ï¼Œä½†æ˜¯å¿…é¡»é€šè¿‡å…¶åŸºæœ¬æ¥å£
    // è¿›è¡Œã€‚åªè¦å®¢æˆ·ç«¯é€šè¿‡åŸºæœ¬æ¥å£ä¸åˆ›å»ºè€…è¿›è¡Œäº¤äº’ï¼Œä½ å°±å¯å°†ä»»ä½•åˆ›å»ºè€…å­
    // ç±»ä¼ é€’ç»™å®¢æˆ·ç«¯ã€‚
    method main() is
        this.initialize()
        dialog.render()
```



#### typescript example

ä¸‹é¢æ˜¯è¿™ä¸ªHRæ‰¾é¢è¯•å®˜ä¾‹å­çš„ä»£ç å®ç°

HiringManageræŠ½è±¡ç±»å°±æ˜¯å·¥å‚ç±»ï¼Œç›¸å½“äºç®€å•å·¥å‚çš„æƒ…å†µä¸‹ï¼ŒæŠŠè¿™ä¸ªå·¥å‚æ–¹æ³•å˜æŠ½è±¡ï¼Œè®©ç»™å¤–éƒ¨å»ç»§æ‰¿å®ç°å®ä¾‹åŒ–ã€‚

```typescript
interface Interviewer {
  askQuestions(): void
}

class Developer implements Interviewer {
  askQuestions(): void {
    console.log('ask about design patterns!')
  }
}

class CommunityExecutive implements Interviewer {
  askQuestions(): void {
    console.log('ask more about community building')
  }
}

abstract class HiringManager {
  protected abstract makeInterviewer(): Interviewer
  takeInterview() {
    const interviewer = this.makeInterviewer()
    interviewer.askQuestions()
  }
}

class DevelopmentManager extends HiringManager {
  protected makeInterviewer(): Interviewer {
    return new Developer()
  }
}

class MarketingManager extends HiringManager {
  protected makeInterviewer(): Interviewer {
    return new CommunityExecutive()
  }
}

const devManager = new DevelopmentManager()
devManager.takeInterview()

const marketManager = new MarketingManager()
marketManager.takeInterview()

```

å¦ä¸€ä¸ªä¾‹å­

```typescript
/**
 * The Creator class declares the factory method that is supposed to return an
 * object of a Product class. The Creator's subclasses usually provide the
 * implementation of this method.
 */
abstract class Creator {
    /**
     * Note that the Creator may also provide some default implementation of the
     * factory method.
     */
    public abstract factoryMethod(): Product;

    /**
     * Also note that, despite its name, the Creator's primary responsibility is
     * not creating products. Usually, it contains some core business logic that
     * relies on Product objects, returned by the factory method. Subclasses can
     * indirectly change that business logic by overriding the factory method
     * and returning a different type of product from it.
     */
    public someOperation(): string {
        // Call the factory method to create a Product object.
        const product = this.factoryMethod();
        // Now, use the product.
        return `Creator: The same creator's code has just worked with ${product.operation()}`;
    }
}

/**
 * Concrete Creators override the factory method in order to change the
 * resulting product's type.
 */
class ConcreteCreator1 extends Creator {
    /**
     * Note that the signature of the method still uses the abstract product
     * type, even though the concrete product is actually returned from the
     * method. This way the Creator can stay independent of concrete product
     * classes.
     */
    public factoryMethod(): Product {
        return new ConcreteProduct1();
    }
}

class ConcreteCreator2 extends Creator {
    public factoryMethod(): Product {
        return new ConcreteProduct2();
    }
}

/**
 * The Product interface declares the operations that all concrete products must
 * implement.
 */
interface Product {
    operation(): string;
}

/**
 * Concrete Products provide various implementations of the Product interface.
 */
class ConcreteProduct1 implements Product {
    public operation(): string {
        return '{Result of the ConcreteProduct1}';
    }
}

class ConcreteProduct2 implements Product {
    public operation(): string {
        return '{Result of the ConcreteProduct2}';
    }
}

/**
 * The client code works with an instance of a concrete creator, albeit through
 * its base interface. As long as the client keeps working with the creator via
 * the base interface, you can pass it any creator's subclass.
 */
function clientCode(creator: Creator) {
    // ...
    console.log('Client: I\'m not aware of the creator\'s class, but it still works.');
    console.log(creator.someOperation());
    // ...
}

/**
 * The Application picks a creator's type depending on the configuration or
 * environment.
 */
console.log('App: Launched with the ConcreteCreator1.');
clientCode(new ConcreteCreator1());
console.log('');

console.log('App: Launched with the ConcreteCreator2.');
clientCode(new ConcreteCreator2());
```



### 3.ğŸ”¨æŠ½è±¡å·¥å‚æ¨¡å¼  Abstract Factory

#### ç°å®çš„ä¾‹å­:

å›åˆ°ä¹‹é—´ä½¿ç”¨çš„ç®€å•å·¥å‚çš„é—¨çš„ä¾‹å­,æ‚¨å¯ä»¥ä»æœ¨é—¨å•†åº—å¾—åˆ°æœ¨é—¨ï¼Œé“é—¨å•†åº—æˆ–PVCé—¨ä»ç›¸å…³çš„å•†åº—ã€‚å¦å¤–ï¼Œä½ å¯èƒ½éœ€è¦ä¸€ä¸ªæœ‰ä¸åŒä¸“ä¸šçš„äººæ¥è£…é—¨ï¼Œä¾‹å¦‚æœ¨åŒ åšæœ¨é—¨ï¼Œç„Šå·¥åšé“é—¨ç­‰ã€‚æ­£å¦‚ä½ æ‰€çœ‹åˆ°çš„ï¼Œç°åœ¨é—¨ä¹‹é—´æœ‰ä¸€ä¸ªä¾èµ–å…³ç³»ï¼Œæœ¨é—¨éœ€è¦æœ¨åŒ ï¼Œé“é—¨éœ€è¦ç„Šå·¥ç­‰ç­‰ã€‚

#### ç®€å•æ€»ç»“

å·¥å‚çš„å·¥å‚,å°†ä¸ªåˆ«ä½†ç›¸å…³/ä¾èµ–çš„å·¥å‚åˆ†ç»„åœ¨ä¸€èµ·è€Œä¸æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»çš„å·¥å‚ã€‚

#### ç»´åŸºç™¾ç§‘çš„æè¿°

æŠ½è±¡å·¥å‚æ¨¡å¼æä¾›äº†ä¸€ç§æ–¹å¼æ¥å°è£…ä¸€ç»„å…·æœ‰å…¬å…±ä¸»é¢˜çš„ç‹¬ç«‹å·¥å‚ï¼Œè€Œæ— éœ€æŒ‡å®šå®ƒä»¬çš„å…·ä½“ç±»

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

- ä½ å¯ä»¥ç¡®ä¿åŒä¸€å·¥å‚ç”Ÿæˆçš„äº§å“ç›¸äº’åŒ¹é…ã€‚
-  ä½ å¯ä»¥é¿å…å®¢æˆ·ç«¯å’Œå…·ä½“äº§å“ä»£ç çš„è€¦åˆã€‚
-  *å•ä¸€èŒè´£åŸåˆ™*ã€‚ ä½ å¯ä»¥å°†äº§å“ç”Ÿæˆä»£ç æŠ½å–åˆ°åŒä¸€ä½ç½®ï¼Œ ä½¿å¾—ä»£ç æ˜“äºç»´æŠ¤ã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ å‘åº”ç”¨ç¨‹åºä¸­å¼•å…¥æ–°äº§å“å˜ä½“æ—¶ï¼Œ ä½ æ— éœ€ä¿®æ”¹å®¢æˆ·ç«¯ä»£ç ã€‚

**ç¼ºç‚¹**

- ç”±äºé‡‡ç”¨è¯¥æ¨¡å¼éœ€è¦å‘åº”ç”¨ä¸­å¼•å…¥ä¼—å¤šæ¥å£å’Œç±»ï¼Œ ä»£ç å¯èƒ½ä¼šæ¯”ä¹‹å‰æ›´åŠ å¤æ‚ã€‚

#### typescript example

ä¸‹é¢æ˜¯è¿™ä¸ªæœ¨é—¨ä¾‹å­çš„typescriptä»£ç 

```typescript
interface Door {
  getDescription(): void
}

class WoodenDoor implements Door {
  getDescription(): void {
    console.log('I am a wooden door')
  }
}
class IronDoor implements Door {
  getDescription(): void {
    console.log('i am an iron door')
  }
}

interface DoorFittingExpert {
  getDescription(): void
}

class Welder implements DoorFittingExpert {
  getDescription(): void {
    console.log('i can only fit iron doors')
  }
}
class Carpenter implements DoorFittingExpert {
  getDescription(): void {
    console.log('i can only fit wooden doors')
  }
}
interface DoorFactory {
  makeDoor(): Door
  makeFittingExpert(): DoorFittingExpert
}
class WoodenDoorFactory implements DoorFactory {
  makeDoor(): Door {
    return new WoodenDoor()
  }
  makeFittingExpert(): DoorFittingExpert {
    return new Carpenter()
  }
}

class IronDoorFactory implements DoorFactory {
  makeDoor(): Door {
    return new IronDoor()
  }
  makeFittingExpert(): DoorFittingExpert {
    return new Welder()
  }
}

const woodenFactory = new WoodenDoorFactory()
const door = woodenFactory.makeDoor()
const expert = woodenFactory.makeFittingExpert()
door.getDescription()
expert.getDescription()
export {}

```

### 4.ğŸ’å•ä¾‹æ¨¡å¼(Singleton)

**äº¦ç§°ï¼š** å•ä»¶æ¨¡å¼

#### ç°å®çš„ä¾‹å­

ä¸€ä¸ªå›½å®¶åªèƒ½æœ‰ä¸€ä¸ªæ€»ç»Ÿï¼Œæ€»ç»Ÿå§‹ç»ˆæ˜¯ä¸€ä¸ªã€‚

#### ç®€å•æ€»ç»“

ç¡®ä¿åªåˆ›å»ºç‰¹å®šç±»çš„ä¸€ä¸ªå¯¹è±¡ã€‚

#### ç»´åŸºç™¾ç§‘çš„æè¿°

åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œå•ä¾‹æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒå°†ç±»çš„å®ä¾‹åŒ–é™åˆ¶åœ¨ä¸€ä¸ªå¯¹è±¡ä¸­ã€‚å½“åªéœ€è¦ä¸€ä¸ªå¯¹è±¡æ¥åè°ƒæ•´ä¸ªç³»ç»Ÿçš„æ“ä½œæ—¶ï¼Œè¿™å¾ˆæœ‰ç”¨ã€‚

å•ä¾‹æ¨¡å¼å®é™…ä¸Šè¢«è®¤ä¸ºæ˜¯åæ¨¡å¼ï¼Œåº”è¯¥é¿å…è¿‡åº¦ä½¿ç”¨å®ƒã€‚å®ƒå¹¶ä¸ä¸€å®šæ˜¯åçš„ï¼Œå¯èƒ½ä¼šæœ‰ä¸€äº›æœ‰æ•ˆçš„ç”¨ä¾‹ï¼Œä½†æ˜¯åº”è¯¥è°¨æ…ä½¿ç”¨ï¼Œå› ä¸ºå®ƒä¼šåœ¨åº”ç”¨ç¨‹åºä¸­å¼•å…¥ä¸€ä¸ªå…¨å±€çŠ¶æ€ï¼Œåœ¨ä¸€ä¸ªåœ°æ–¹å¯¹å®ƒçš„æ›´æ”¹å¯èƒ½ä¼šå½±å“åˆ°å…¶ä»–åŒºåŸŸï¼Œå¹¶ä¸”å®ƒå¯èƒ½å˜å¾—éå¸¸éš¾ä»¥è°ƒè¯•ã€‚å®ƒä»¬çš„å¦ä¸€ä¸ªç¼ºç‚¹æ˜¯å®ƒä½¿ä½ çš„ä»£ç ç´§å¯†è€¦åˆï¼Œå†åŠ ä¸Šmockå•ä¾‹å¯èƒ½ä¼šå¾ˆå›°éš¾ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  ä½ å¯ä»¥ä¿è¯ä¸€ä¸ªç±»åªæœ‰ä¸€ä¸ªå®ä¾‹ã€‚
-  ä½ è·å¾—äº†ä¸€ä¸ªæŒ‡å‘è¯¥å®ä¾‹çš„å…¨å±€è®¿é—®èŠ‚ç‚¹ã€‚
-  ä»…åœ¨é¦–æ¬¡è¯·æ±‚å•ä¾‹å¯¹è±¡æ—¶å¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ã€‚

**ç¼ºç‚¹**

- è¿åäº†_å•ä¸€èŒè´£åŸåˆ™_ã€‚ è¯¥æ¨¡å¼åŒæ—¶è§£å†³äº†ä¸¤ä¸ªé—®é¢˜ã€‚
-  å•ä¾‹æ¨¡å¼å¯èƒ½æ©ç›–ä¸è‰¯è®¾è®¡ï¼Œ æ¯”å¦‚ç¨‹åºå„ç»„ä»¶ä¹‹é—´ç›¸äº’äº†è§£è¿‡å¤šç­‰ã€‚
-  è¯¥æ¨¡å¼åœ¨å¤šçº¿ç¨‹ç¯å¢ƒä¸‹éœ€è¦è¿›è¡Œç‰¹æ®Šå¤„ç†ï¼Œ é¿å…å¤šä¸ªçº¿ç¨‹å¤šæ¬¡åˆ›å»ºå•ä¾‹å¯¹è±¡ã€‚
-  å•ä¾‹çš„å®¢æˆ·ç«¯ä»£ç å•å…ƒæµ‹è¯•å¯èƒ½ä¼šæ¯”è¾ƒå›°éš¾ï¼Œ å› ä¸ºè®¸å¤šæµ‹è¯•æ¡†æ¶ä»¥åŸºäºç»§æ‰¿çš„æ–¹å¼åˆ›å»ºæ¨¡æ‹Ÿå¯¹è±¡ã€‚ ç”±äºå•ä¾‹ç±»çš„æ„é€ å‡½æ•°æ˜¯ç§æœ‰çš„ï¼Œ è€Œä¸”ç»å¤§éƒ¨åˆ†è¯­è¨€æ— æ³•é‡å†™é™æ€æ–¹æ³•ï¼Œ æ‰€ä»¥ä½ éœ€è¦æƒ³å‡ºä»”ç»†è€ƒè™‘æ¨¡æ‹Ÿå•ä¾‹çš„æ–¹æ³•ã€‚ è¦ä¹ˆå¹²è„†ä¸ç¼–å†™æµ‹è¯•ä»£ç ï¼Œ æˆ–è€…ä¸ä½¿ç”¨å•ä¾‹æ¨¡å¼ã€‚

#### typescript example

````typescript
class President {
  private static instance: President
  private constructor() {}
  static getInstance(): President {
    if (!this.instance) {
      this.instance = new this()
    }
    return this.instance
  }
}

const president1 = President.getInstance()
const president2 = President.getInstance()
console.log(president1 == president2)
````

### 5.ğŸ‘·ç”Ÿæˆå™¨æ¨¡å¼(Builder)

**äº¦ç§°ï¼š** å»ºé€ è€…æ¨¡å¼

#### ç°å®çš„ä¾‹å­

ä¾‹å¦‚ï¼Œä½ æƒ³è¦ä¸€ä»½å®šåˆ¶çš„èµ›ç™¾å‘³å¥—é¤ï¼Œä½ å¯ä»¥é€‰æ‹©å‡ ç§æ±‰å ¡çš„åˆ¶ä½œæ–¹æ³•ï¼Œæ¯”å¦‚ä½ æƒ³è¦å“ªç§é¢åŒ…?æ‚¨å–œæ¬¢ä»€ä¹ˆé…±æ±?ä½ æƒ³è¦ä»€ä¹ˆå¥¶é…ª?ç­‰ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæ„å»ºå™¨æ¨¡å¼å¯ä»¥æä¾›å¸®åŠ©ã€‚

#### ç®€å•æ€»ç»“

**ç”Ÿæˆå™¨æ¨¡å¼**æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ ä½¿ä½ èƒ½å¤Ÿåˆ†æ­¥éª¤åˆ›å»ºå¤æ‚å¯¹è±¡ã€‚ è¯¥æ¨¡å¼å…è®¸ä½ ä½¿ç”¨ç›¸åŒçš„åˆ›å»ºä»£ç ç”Ÿæˆä¸åŒç±»å‹å’Œå½¢å¼çš„å¯¹è±¡ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

- ä½ å¯ä»¥åˆ†æ­¥åˆ›å»ºå¯¹è±¡ï¼Œ æš‚ç¼“åˆ›å»ºæ­¥éª¤æˆ–é€’å½’è¿è¡Œåˆ›å»ºæ­¥éª¤ã€‚
-  ç”Ÿæˆä¸åŒå½¢å¼çš„äº§å“æ—¶ï¼Œ ä½ å¯ä»¥å¤ç”¨ç›¸åŒçš„åˆ¶é€ ä»£ç ã€‚
-  *å•ä¸€èŒè´£åŸåˆ™*ã€‚ ä½ å¯ä»¥å°†å¤æ‚æ„é€ ä»£ç ä»äº§å“çš„ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»å‡ºæ¥

**ç¼ºç‚¹**

- ç”±äºè¯¥æ¨¡å¼éœ€è¦æ–°å¢å¤šä¸ªç±»ï¼Œ å› æ­¤ä»£ç æ•´ä½“å¤æ‚ç¨‹åº¦ä¼šæœ‰æ‰€å¢åŠ ã€‚

#### typescript example

```typescript
class Burger {
  protected size: number
  protected cheese = false
  protected pepperoni = false
  protected lettuce = false
  protected tomato = false
  constructor(builder: BurgerBuilder) {
    this.size = builder.size
    this.cheese = builder.cheese
    this.pepperoni = builder.pepperoni
    this.lettuce = builder.lettuce
    this.tomato = builder.tomato
  }
}

class BurgerBuilder {
  size: number
  cheese = false
  pepperoni = false
  lettuce = false
  tomato = false
  constructor(size: number) {
    this.size = size
  }
  addPepperoni() {
    this.pepperoni = true
    return this
  }
  addLettuce() {
    this.lettuce = true
    return this
  }
  addCheese() {
    this.cheese = true
    return this
  }
  addTomato() {
    this.tomato = true
    return this
  }
  build(): Burger {
    return new Burger(this)
  }
}

const burger = new BurgerBuilder(14).addCheese().addPepperoni().build()

```

### 6.ğŸ‘åŸå‹æ¨¡å¼(Prototype)

**äº¦ç§°ï¼š** å…‹éš†ã€Clone

#### ç°å®çš„ä¾‹å­

è¿˜è®°å¾—å¤šè‰?é‚£åªå…‹éš†ç¾Š!æˆ‘ä»¬å°±ä¸è°ˆç»†èŠ‚äº†ï¼Œä½†è¿™é‡Œçš„å…³é”®æ˜¯è¿™éƒ½æ˜¯å…³äºå…‹éš†çš„

#### ç®€å•æ€»ç»“

**åŸå‹æ¨¡å¼**æ˜¯ä¸€ç§åˆ›å»ºå‹è®¾è®¡æ¨¡å¼ï¼Œ ä½¿ä½ èƒ½å¤Ÿå¤åˆ¶å·²æœ‰å¯¹è±¡ï¼Œ è€Œåˆæ— éœ€ä½¿ä»£ç ä¾èµ–å®ƒä»¬æ‰€å±çš„ç±»ã€‚

#### é€‚åˆçš„ä½¿ç”¨åœºæ™¯

**å¦‚æœä½ éœ€è¦å¤åˆ¶ä¸€äº›å¯¹è±¡ï¼Œ åŒæ—¶åˆå¸Œæœ›ä»£ç ç‹¬ç«‹äºè¿™äº›å¯¹è±¡æ‰€å±çš„å…·ä½“ç±»ï¼Œ å¯ä»¥ä½¿ç”¨åŸå‹æ¨¡å¼ã€‚**

 è¿™ä¸€ç‚¹è€ƒé‡é€šå¸¸å‡ºç°åœ¨ä»£ç éœ€è¦å¤„ç†ç¬¬ä¸‰æ–¹ä»£ç é€šè¿‡æ¥å£ä¼ é€’è¿‡æ¥çš„å¯¹è±¡æ—¶ã€‚ å³ä½¿ä¸è€ƒè™‘ä»£ç è€¦åˆçš„æƒ…å†µï¼Œ ä½ çš„ä»£ç ä¹Ÿä¸èƒ½ä¾èµ–è¿™äº›å¯¹è±¡æ‰€å±çš„å…·ä½“ç±»ï¼Œ å› ä¸ºä½ ä¸çŸ¥é“å®ƒä»¬çš„å…·ä½“ä¿¡æ¯ã€‚

åŸå‹æ¨¡å¼ä¸ºå®¢æˆ·ç«¯ä»£ç æä¾›ä¸€ä¸ªé€šç”¨æ¥å£ï¼Œ å®¢æˆ·ç«¯ä»£ç å¯é€šè¿‡è¿™ä¸€æ¥å£ä¸æ‰€æœ‰å®ç°äº†å…‹éš†çš„å¯¹è±¡è¿›è¡Œäº¤äº’ï¼Œ å®ƒä¹Ÿä½¿å¾—å®¢æˆ·ç«¯ä»£ç ä¸å…¶æ‰€å…‹éš†çš„å¯¹è±¡å…·ä½“ç±»ç‹¬ç«‹å¼€æ¥ã€‚



 **å¦‚æœå­ç±»çš„åŒºåˆ«ä»…åœ¨äºå…¶å¯¹è±¡çš„åˆå§‹åŒ–æ–¹å¼ï¼Œ é‚£ä¹ˆä½ å¯ä»¥ä½¿ç”¨è¯¥æ¨¡å¼æ¥å‡å°‘å­ç±»çš„æ•°é‡ã€‚ åˆ«äººåˆ›å»ºè¿™äº›å­ç±»çš„ç›®çš„å¯èƒ½æ˜¯ä¸ºäº†åˆ›å»ºç‰¹å®šç±»å‹çš„å¯¹è±¡ã€‚**

 åœ¨åŸå‹æ¨¡å¼ä¸­ï¼Œ ä½ å¯ä»¥ä½¿ç”¨ä¸€ç³»åˆ—é¢„ç”Ÿæˆçš„ã€ å„ç§ç±»å‹çš„å¯¹è±¡ä½œä¸ºåŸå‹ã€‚

å®¢æˆ·ç«¯ä¸å¿…æ ¹æ®éœ€æ±‚å¯¹å­ç±»è¿›è¡Œå®ä¾‹åŒ–ï¼Œ åªéœ€æ‰¾åˆ°åˆé€‚çš„åŸå‹å¹¶å¯¹å…¶è¿›è¡Œå…‹éš†å³å¯ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

- ä½ å¯ä»¥å…‹éš†å¯¹è±¡ï¼Œ è€Œæ— éœ€ä¸å®ƒä»¬æ‰€å±çš„å…·ä½“ç±»ç›¸è€¦åˆã€‚
-  ä½ å¯ä»¥å…‹éš†é¢„ç”ŸæˆåŸå‹ï¼Œ é¿å…åå¤è¿è¡Œåˆå§‹åŒ–ä»£ç ã€‚
-  ä½ å¯ä»¥æ›´æ–¹ä¾¿åœ°ç”Ÿæˆå¤æ‚å¯¹è±¡ã€‚
-  ä½ å¯ä»¥ç”¨ç»§æ‰¿ä»¥å¤–çš„æ–¹å¼æ¥å¤„ç†å¤æ‚å¯¹è±¡çš„ä¸åŒé…ç½®ã€‚

**ç¼ºç‚¹**

-  å…‹éš†åŒ…å«å¾ªç¯å¼•ç”¨çš„å¤æ‚å¯¹è±¡å¯èƒ½ä¼šéå¸¸éº»çƒ¦ã€‚

#### typescript example

```typescript
class Sheep {
  protected name: string
  protected category: string
  constructor(name: string, category = 'Mountain Sheep') {
    this.name = name
    this.category = category
  }
  setName(name: string) {
    this.name = name
  }
  getName() {
    return this.name
  }
  setCategory(category: string) {
    this.category = category
  }
  getCategory() {
    return this.category
  }
}

const original = new Sheep('Jolly')
console.log(`name:${original.getName()}, category: ${original.getCategory()}`)

// éœ€è¦è°ƒç”¨ä¸€ä¸ªæ·±æ‹·è´æ–¹æ³•ï¼ŒjsåŸç”Ÿå¹¶æ²¡æœ‰è¿™ç§æ–¹æ³•

```



## ç»“æ„è®¾è®¡æ¨¡å¼

ç»“æ„è®¾è®¡æ¨¡å¼ä¸»è¦å…³æ³¨å¯¹è±¡ç»„åˆï¼Œæ¢å¥è¯è¯´ï¼Œå®ä½“å¦‚ä½•ç›¸äº’ä½¿ç”¨ã€‚æˆ–è€…å¦ä¸€ç§è§£é‡Šæ˜¯ï¼Œå®ƒä»¬æœ‰åŠ©äºå›ç­”â€œå¦‚ä½•æ„å»ºè½¯ä»¶ç»„ä»¶â€

### 1.â˜• è£…é¥°å™¨æ¨¡å¼ï¼ˆDecoratorï¼‰

**äº¦ç§°ï¼š** è£…é¥°è€…æ¨¡å¼ã€è£…é¥°å™¨æ¨¡å¼ã€Wrapperã€Decorator

#### ç°å®çš„ä¾‹å­

å‡è®¾ä½ ç»è¥ä¸€å®¶å’–å•¡åº—ï¼Œè®¡ç®—è´¦å•çš„æ—¶å€™éœ€è¦æ ¹æ®æ·»åŠ çš„å„ç§åŸæ–™è®¡ç®—æœ€ç»ˆçš„æˆæœ¬ï¼Œè¿™ä¸ªæƒ…å†µä¸‹ï¼Œæ¯ä¸ªæ·»åŠ çš„åŸæ–™å¯ä»¥ä½œä¸ºè£…é¥°å™¨

ï¼ˆå®é™…ä¸Šç¢°åˆ°è¿™ç§ä¾‹å­ï¼ŒæŸ¥è¡¨å°±å¯ä»¥äº†å§ï¼Œä»·æ ¼ä¸å¿…ç¡¬ç¼–ç åˆ°ç¨‹åºé‡Œï¼‰

#### ç®€å•æ€»ç»“

è£…é¥°å™¨æ¨¡å¼å…è®¸ä½ é€šè¿‡ç”¨ä¸€ä¸ªè£…é¥°å™¨ç±»åŒ…è£¹å¯¹è±¡ï¼Œåœ¨è¿è¡Œæ—¶å¯¹ä¸€ä¸ªå¯¹è±¡åŠ¨æ€æ·»åŠ è¡Œä¸º

#### ç»´åŸºç™¾ç§‘çš„è§£é‡Š

åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œè£…é¥°å™¨æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å°†è¡Œä¸ºé™æ€æˆ–åŠ¨æ€åœ°æ·»åŠ åˆ°å•ä¸ªå¯¹è±¡ä¸­ï¼Œè€Œä¸ä¼šå½±å“æ¥è‡ªåŒä¸€ç±»çš„å…¶ä»–å¯¹è±¡çš„è¡Œä¸ºã€‚decoratoræ¨¡å¼å¯¹äºéµå¾ªå•ä¸€èŒè´£åŸåˆ™é€šå¸¸å¾ˆæœ‰ç”¨ï¼Œå› ä¸ºå®ƒå…è®¸åœ¨å…·æœ‰å”¯ä¸€å…³æ³¨åŒºåŸŸçš„ç±»ä¹‹é—´åˆ’åˆ†åŠŸèƒ½ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  ä½ æ— éœ€åˆ›å»ºæ–°å­ç±»å³å¯æ‰©å±•å¯¹è±¡çš„è¡Œä¸ºã€‚
-  ä½ å¯ä»¥åœ¨è¿è¡Œæ—¶æ·»åŠ æˆ–åˆ é™¤å¯¹è±¡çš„åŠŸèƒ½ã€‚
-  ä½ å¯ä»¥ç”¨å¤šä¸ªè£…é¥°å°è£…å¯¹è±¡æ¥ç»„åˆå‡ ç§è¡Œä¸ºã€‚
-  *å•ä¸€èŒè´£åŸåˆ™*ã€‚ ä½ å¯ä»¥å°†å®ç°äº†è®¸å¤šä¸åŒè¡Œä¸ºçš„ä¸€ä¸ªå¤§ç±»æ‹†åˆ†ä¸ºå¤šä¸ªè¾ƒå°çš„ç±»ã€‚

**ç¼ºç‚¹**

-  åœ¨å°è£…å™¨æ ˆä¸­åˆ é™¤ç‰¹å®šå°è£…å™¨æ¯”è¾ƒå›°éš¾ã€‚
-  å®ç°è¡Œä¸ºä¸å—è£…é¥°æ ˆé¡ºåºå½±å“çš„è£…é¥°æ¯”è¾ƒå›°éš¾ã€‚
-  å„å±‚çš„åˆå§‹åŒ–é…ç½®ä»£ç çœ‹ä¸Šå»å¯èƒ½ä¼šå¾ˆç³Ÿç³•ã€‚

#### typescript example

ä¸‹é¢æ—¶coffeeä¾‹å­çš„

```typescript
interface Coffee {
  getCost(): number
  getDescription(): string
}

class SimpleCoffee implements Coffee {
  getCost() {
    return 10
  }
  getDescription() {
    return 'simple coffee'
  }
}

class MilkDecorator implements Coffee {
  protected coffee: Coffee
  protected description: string
  constructor(c: Coffee) {
    this.coffee = c
    this.description = 'milk'
  }
  getCost() {
    return 4 + this.coffee.getCost()
  }
  getDescription() {
    return this.coffee.getDescription() + ' ' + this.description
  }
}
class WhipDecorator implements Coffee {
  protected coffee: Coffee
  protected description: string
  constructor(c: Coffee) {
    this.coffee = c
    this.description = 'whip'
  }
  getCost() {
    return 5 + this.coffee.getCost()
  }
  getDescription() {
    return this.coffee.getDescription() + ' ' + this.description
  }
}
// é¦™è‰
class VanillaDecorator implements Coffee {
  protected coffee: Coffee
  protected description: string
  constructor(c: Coffee) {
    this.coffee = c
    this.description = 'vanilla'
  }
  getCost() {
    return 3 + this.coffee.getCost()
  }
  getDescription() {
    return this.coffee.getDescription() + ' ' + this.description
  }
}

const simpleCoffee = new SimpleCoffee()
console.log(simpleCoffee.getDescription())
console.log(simpleCoffee.getCost())

const milkCoffee = new MilkDecorator(simpleCoffee)
console.log(milkCoffee.getDescription())
console.log(milkCoffee.getCost())

const mixCoffee = new VanillaDecorator(
  new MilkDecorator(new WhipDecorator(simpleCoffee))
)

console.log(mixCoffee.getDescription())
console.log(mixCoffee.getCost())
export{}
```

### 2.ğŸ”Œ é€‚é…å™¨æ¨¡å¼(Adapter)

**äº¦ç§°ï¼š** å°è£…å™¨æ¨¡å¼ã€Wrapper

#### ç°å®çš„ä¾‹å­

è€ƒè™‘åˆ°ä½ çš„è®°å¿†å¡ä¸­æœ‰ä¸€äº›å›¾ç‰‡ï¼Œä½ éœ€è¦æŠŠå®ƒä»¬è½¬ç§»åˆ°ä½ çš„ç”µè„‘ä¸Šã€‚ä¸ºäº†ä¼ è¾“å®ƒä»¬ï¼Œä½ éœ€è¦æŸç§é€‚é…å™¨ï¼Œå®ƒä¸ä½ çš„è®¡ç®—æœºç«¯å£å…¼å®¹ï¼Œè¿™æ ·ä½ å°±å¯ä»¥æŠŠå­˜å‚¨å¡è¿æ¥åˆ°ä½ çš„è®¡ç®—æœºä¸Šã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œè¯»å¡å™¨æ˜¯ä¸€ä¸ªé€‚é…å™¨ã€‚å¦ä¸€ä¸ªä¾‹å­æ˜¯è‘—åçš„ç”µæºé€‚é…å™¨;ä¸‰è„šæ’å¤´ä¸èƒ½è¿æ¥åˆ°ä¸¤ä¸ªå°–å¤´æ’åº§ï¼Œå®ƒéœ€è¦ä½¿ç”¨ç”µæºé€‚é…å™¨ï¼Œä½¿å…¶å…¼å®¹ä¸¤ä¸ªå°–å¤´æ’åº§ã€‚è¿˜æœ‰ä¸€ä¸ªä¾‹å­æ˜¯è¯‘è€…å°†ä¸€ä¸ªäººè¯´çš„è¯ç¿»è¯‘ç»™å¦ä¸€ä¸ªäºº

#### ç®€å•æ€»ç»“

é€‚é…å™¨æ¨¡å¼å…è®¸æ‚¨åœ¨é€‚é…å™¨ä¸­åŒ…è£…å…¶ä»–ä¸å…¼å®¹çš„å¯¹è±¡ä»¥ä½¿å…¶ä¸å¦ä¸€ä¸ªç±»å…¼å®¹ã€‚

#### ç»´åŸºç™¾ç§‘çš„æè¿°

åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œé€‚é…å™¨æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå®ƒå…è®¸å°†ç°æœ‰ç±»çš„æ¥å£ç”¨ä½œå¦ä¸€ä¸ªæ¥å£ã€‚å®ƒé€šå¸¸ç”¨äºä½¿ç°æœ‰çš„ç±»ä¸å…¶ä»–ç±»ä¸€èµ·å·¥ä½œï¼Œè€Œä¸ä¿®æ”¹å®ƒä»¬çš„æºä»£ç ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  _å•ä¸€èŒè´£åŸåˆ™_ä½ å¯ä»¥å°†æ¥å£æˆ–æ•°æ®è½¬æ¢ä»£ç ä»ç¨‹åºä¸»è¦ä¸šåŠ¡é€»è¾‘ä¸­åˆ†ç¦»ã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ åªè¦å®¢æˆ·ç«¯ä»£ç é€šè¿‡å®¢æˆ·ç«¯æ¥å£ä¸é€‚é…å™¨è¿›è¡Œäº¤äº’ï¼Œ ä½ å°±èƒ½åœ¨ä¸ä¿®æ”¹ç°æœ‰å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹åœ¨ç¨‹åºä¸­æ·»åŠ æ–°ç±»å‹çš„é€‚é…å™¨ã€‚

**ç¼ºç‚¹**

-  ä»£ç æ•´ä½“å¤æ‚åº¦å¢åŠ ï¼Œ å› ä¸ºä½ éœ€è¦æ–°å¢ä¸€ç³»åˆ—æ¥å£å’Œç±»ã€‚ æœ‰æ—¶ç›´æ¥æ›´æ”¹æœåŠ¡ç±»ä½¿å…¶ä¸å…¶ä»–ä»£ç å…¼å®¹ä¼šæ›´ç®€å•ã€‚

#### typescript example

æƒ³è±¡ä¸€ä¸ªçŒäººçŒæ€å¼å­çš„æ¸¸æˆ,ç°åœ¨æˆ‘ä»¬åŠ å…¥ç‹—,åŒæ—¶ç”¨é€‚é…å™¨æ¨¡å¼è®©çŒäººçš„çŒäººæ¨¡å—å…¼å®¹ç‹—

```typescript
interface Lion {
  roar(): void
}

class AfricanLion implements Lion {
  roar(): void {
    console.log('aouuuuuuuu!')
  }
}
class AsianLion implements Lion {
  roar(): void {
    console.log('aooooooooooo!')
  }
}

class Hunter {
  hunt(lion: Lion) {
    lion.roar()
  }
}

class WildDog {
  bark(): void {
    console.log('wang!wang!wang!')
  }
}

class WildDogAdapter implements Lion {
  protected dog
  constructor(dog: WildDog) {
    this.dog = dog
  }
  roar(): void {
    this.dog.bark()
  }
}

const wildDog = new WildDog()
const wildDogAdapter = new WildDogAdapter(wildDog)
const hunter = new Hunter()
hunter.hunt(wildDogAdapter)

```

### 3.ğŸ“¦ å¤–è§‚æ¨¡å¼(Facade)

**äº¦ç§°ï¼š**é—¨é¢æ¨¡å¼

#### ç°å®çš„ä¾‹å­

(è¿™å°ç”µè„‘æ€ä¹ˆå¼€æœº?)ä½ ä¼šè¯´â€œæŒ‰ç”µæºæŒ‰é’®â€!è¿™å°±æ˜¯ä½ æ‰€ç›¸ä¿¡çš„ï¼Œå› ä¸ºä½ ä½¿ç”¨çš„æ˜¯è®¡ç®—æœºæä¾›çš„ä¸€ä¸ªç®€å•çš„ç•Œé¢ï¼Œå†…éƒ¨å®ƒéœ€è¦åšå¾ˆå¤šäº‹æƒ…æ¥å®ç°å®ƒã€‚è¿™ä¸ªåˆ°å¤æ‚å­ç³»ç»Ÿçš„ç®€å•æ¥å£å°±æ˜¯facadeã€‚

#### ç®€å•æ€»ç»“

Facadeæ¨¡å¼ä¸ºå¤æ‚çš„å­ç³»ç»Ÿæä¾›äº†ç®€åŒ–çš„æ¥å£ã€‚

#### ç»´åŸºç™¾ç§‘çš„æè¿°

facadeæ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œå®ƒä¸ºæ›´å¤§çš„ä»£ç ä½“(å¦‚ç±»åº“)æä¾›äº†ç®€åŒ–çš„æ¥å£ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

- ä½ å¯ä»¥è®©è‡ªå·±çš„ä»£ç ç‹¬ç«‹äºå¤æ‚å­ç³»ç»Ÿã€‚

**ç¼ºç‚¹**

-  å¤–è§‚å¯èƒ½æˆä¸ºä¸ç¨‹åºä¸­æ‰€æœ‰ç±»éƒ½è€¦åˆçš„[ä¸Šå¸å¯¹è±¡](https://refactoringguru.cn/antipatterns/god-object)(æŒ‡çš„æ˜¯äº†è§£è¿‡å¤š,æˆ–è€…è´Ÿè´£è¿‡å¤šçš„å¯¹è±¡)ã€‚

#### typescript example

```typescript
class Computer {
  // æ–­ç”µ
  getElectricShock() {
    console.log('Ouch')
  }
  makeSound() {
    console.log('Beep beep!')
  }
  showLoadingScreen() {
    console.log('Loading...')
  }
  bam() {
    console.log('Ready to be used')
  }
  closeEverything() {
    console.log('Bup bup bup buzzzz!')
  }
  sooth() {
    console.log('Zzzzz')
  }
  pullCurrent() {
    console.log('Haaah!')
  }
}
class ComputerFacade {
  protected computer
  constructor(computer: Computer) {
    this.computer = computer
  }
  turnOn() {
    this.computer.getElectricShock()
    this.computer.makeSound()
    this.computer.showLoadingScreen()
    this.computer.bam()
  }
  turnOff() {
    this.computer.closeEverything()
    this.computer.pullCurrent()
    this.computer.sooth()
  }
}

const computer = new ComputerFacade(new Computer())
computer.turnOn()
computer.turnOff()
```

### 4.ğŸŒ¿ç»„åˆæ¨¡å¼ (Composite)

**äº¦ç§°ï¼š** å¯¹è±¡æ ‘ã€Object Tree

#### ç°å®çš„ä¾‹å­

æ¯ä¸ªç»„ç»‡éƒ½æ˜¯ç”±å‘˜å·¥ç»„æˆçš„ã€‚æ¯ä¸ªå‘˜å·¥éƒ½æœ‰ç›¸åŒçš„ç‰¹å¾ï¼Œæ¯”å¦‚æœ‰è–ªæ°´ï¼Œæœ‰ä¸€äº›èŒè´£ï¼Œå¯èƒ½æœ‰ä¹Ÿå¯èƒ½æ²¡æœ‰å‘æŸäººæ±‡æŠ¥ï¼Œå¯èƒ½æœ‰ä¹Ÿå¯èƒ½æ²¡æœ‰ä¸‹å±ç­‰ç­‰ã€‚

å¤§éƒ¨åˆ†å›½å®¶çš„å†›é˜Ÿéƒ½é‡‡ç”¨å±‚æ¬¡ç»“æ„ç®¡ç†ã€‚ æ¯æ”¯éƒ¨é˜ŸåŒ…æ‹¬å‡ ä¸ªå¸ˆï¼Œ å¸ˆç”±æ—…æ„æˆï¼Œ æ—…ç”±å›¢æ„æˆï¼Œ å›¢å¯ä»¥ç»§ç»­åˆ’åˆ†ä¸ºæ’ã€‚ æœ€åï¼Œ æ¯ä¸ªæ’ç”±ä¸€å°é˜Ÿå®å®åœ¨åœ¨çš„å£«å…µç»„æˆã€‚ å†›äº‹å‘½ä»¤ç”±æœ€é«˜å±‚ä¸‹è¾¾ï¼Œ é€šè¿‡æ¯ä¸ªå±‚çº§ä¼ é€’ï¼Œ ç›´åˆ°æ¯ä½å£«å…µéƒ½çŸ¥é“è‡ªå·±åº”è¯¥æœä»çš„å‘½ä»¤ã€‚

#### ç®€å•æ€»ç»“

**ç»„åˆæ¨¡å¼**æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ ä½ å¯ä»¥ä½¿ç”¨å®ƒå°†å¯¹è±¡ç»„åˆæˆæ ‘çŠ¶ç»“æ„ï¼Œ å¹¶ä¸”èƒ½åƒä½¿ç”¨ç‹¬ç«‹å¯¹è±¡ä¸€æ ·ä½¿ç”¨å®ƒä»¬ã€‚

#### ç»´åŸºç™¾ç§‘çš„è§£é‡Š

åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œç»„åˆæ¨¡å¼æ˜¯ä¸€ç§åˆ†åŒºè®¾è®¡æ¨¡å¼ã€‚ç»„åˆæ¨¡å¼æè¿°äº†å°†ä¸€ç»„å¯¹è±¡ä½œä¸ºå¯¹è±¡çš„å•ä¸ªå®ä¾‹è¿›è¡Œå¤„ç†çš„æ–¹å¼ã€‚ç»„åˆçš„ç›®çš„æ˜¯å°†å¯¹è±¡â€œç»„åˆâ€æˆæ ‘ç»“æ„ï¼Œä»¥è¡¨ç¤ºéƒ¨åˆ†-æ•´ä½“å±‚æ¬¡ç»“æ„ã€‚å®ç°ç»„åˆæ¨¡å¼è®©å®¢æˆ·ç«¯èƒ½å¤Ÿç»Ÿä¸€å¯¹å¾…å•ä¸ªå¯¹è±¡å’Œç»„åˆã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  ä½ å¯ä»¥åˆ©ç”¨å¤šæ€å’Œé€’å½’æœºåˆ¶æ›´æ–¹ä¾¿åœ°ä½¿ç”¨å¤æ‚æ ‘ç»“æ„ã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ æ— éœ€æ›´æ”¹ç°æœ‰ä»£ç ï¼Œ ä½ å°±å¯ä»¥åœ¨åº”ç”¨ä¸­æ·»åŠ æ–°å…ƒç´ ï¼Œ ä½¿å…¶æˆä¸ºå¯¹è±¡æ ‘çš„ä¸€éƒ¨åˆ†ã€‚

**ç¼ºç‚¹**

-  å¯¹äºåŠŸèƒ½å·®å¼‚è¾ƒå¤§çš„ç±»ï¼Œ æä¾›å…¬å…±æ¥å£æˆ–è®¸ä¼šæœ‰å›°éš¾ã€‚ åœ¨ç‰¹å®šæƒ…å†µä¸‹ï¼Œ ä½ éœ€è¦è¿‡åº¦ä¸€èˆ¬åŒ–ç»„ä»¶æ¥å£ï¼Œ ä½¿å…¶å˜å¾—ä»¤äººéš¾ä»¥ç†è§£ã€‚

#### typescript example

```typescript
/**
 * The base Component class declares common operations for both simple and
 * complex objects of a composition.
 */
abstract class Component {
  protected parent!: Component | null

  /**
   * Optionally, the base Component can declare an interface for setting and
   * accessing a parent of the component in a tree structure. It can also
   * provide some default implementation for these methods.
   */
  public setParent(parent: Component | null) {
    this.parent = parent
  }

  public getParent(): Component | null {
    return this.parent
  }

  /**
   * In some cases, it would be beneficial to define the child-management
   * operations right in the base Component class. This way, you won't need to
   * expose any concrete component classes to the client code, even during the
   * object tree assembly. The downside is that these methods will be empty
   * for the leaf-level components.
   */
  public add(component: Component): void {}

  public remove(component: Component): void {}

  /**
   * You can provide a method that lets the client code figure out whether a
   * component can bear children.
   */
  public isComposite(): boolean {
    return false
  }

  /**
   * The base Component may implement some default behavior or leave it to
   * concrete classes (by declaring the method containing the behavior as
   * "abstract").
   */
  public abstract operation(): string
}

/**
 * The Leaf class represents the end objects of a composition. A leaf can't have
 * any children.
 *
 * Usually, it's the Leaf objects that do the actual work, whereas Composite
 * objects only delegate to their sub-components.
 */
class Leaf extends Component {
  public operation(): string {
    return 'Leaf'
  }
}

/**
 * The Composite class represents the complex components that may have children.
 * Usually, the Composite objects delegate the actual work to their children and
 * then "sum-up" the result.
 */
class Composite extends Component {
  protected children: Component[] = []

  /**
   * A composite object can add or remove other components (both simple or
   * complex) to or from its child list.
   */
  public add(component: Component): void {
    this.children.push(component)
    component.setParent(this)
  }

  public remove(component: Component): void {
    const componentIndex = this.children.indexOf(component)
    this.children.splice(componentIndex, 1)

    component.setParent(null)
  }

  public isComposite(): boolean {
    return true
  }

  /**
   * The Composite executes its primary logic in a particular way. It
   * traverses recursively through all its children, collecting and summing
   * their results. Since the composite's children pass these calls to their
   * children and so forth, the whole object tree is traversed as a result.
   */
  public operation(): string {
    const results = []
    for (const child of this.children) {
      results.push(child.operation())
    }

    return `Branch(${results.join('+')})`
  }
}

/**
 * The client code works with all of the components via the base interface.
 */
function clientCode(component: Component) {
  // ...

  console.log(`RESULT: ${component.operation()}`)

  // ...
}

/**
 * This way the client code can support the simple leaf components...
 */
const simple = new Leaf()
console.log("Client: I've got a simple component:")
clientCode(simple)
console.log('')

/**
 * ...as well as the complex composites.
 */
const tree = new Composite()
const branch1 = new Composite()
branch1.add(new Leaf())
branch1.add(new Leaf())
const branch2 = new Composite()
branch2.add(new Leaf())
tree.add(branch1)
tree.add(branch2)
console.log("Client: Now I've got a composite tree:")
clientCode(tree)
console.log('')

/**
 * Thanks to the fact that the child-management operations are declared in the
 * base Component class, the client code can work with any component, simple or
 * complex, without depending on their concrete classes.
 */
function clientCode2(component1: Component, component2: Component) {
  // ...

  if (component1.isComposite()) {
    component1.add(component2)
  }
  console.log(`RESULT: ${component1.operation()}`)

  // ...
}

console.log(
  "Client: I don't need to check the components classes even when managing the tree:"
)
clientCode2(tree, simple)

```

### 5.ğŸ± ä»£ç†æ¨¡å¼(Proxy)

#### ç°å®çš„ä¾‹å­

ä½ ç”¨è¿‡é—¨ç¦å¡è¿›å‡ºä¸€æ‰‡é—¨å—?å¼€é—¨æœ‰å¤šç§é€‰æ‹©ï¼Œæ¯”å¦‚ï¼Œå¯ä»¥ä½¿ç”¨é—¨ç¦å¡æ‰“å¼€ï¼Œä¹Ÿå¯ä»¥é€šè¿‡æŒ‰ä¸‹ç»•è¿‡å®‰å…¨çš„æŒ‰é’®æ‰“å¼€ã€‚é—¨çš„ä¸»è¦åŠŸèƒ½æ˜¯æ‰“å¼€ï¼Œä½†åœ¨ä¸Šé¢æ·»åŠ äº†ä¸€ä¸ªä»£ç†æ¥æ·»åŠ ä¸€äº›åŠŸèƒ½ã€‚è®©æˆ‘ç”¨ä¸‹é¢çš„ä»£ç ç¤ºä¾‹æ›´å¥½åœ°è§£é‡Šå®ƒã€‚

ä¿¡ç”¨å¡æ˜¯é“¶è¡Œè´¦æˆ·çš„ä»£ç†ï¼Œ é“¶è¡Œè´¦æˆ·åˆ™æ˜¯ä¸€å¤§æ†ç°é‡‘çš„ä»£ç†ã€‚ å®ƒä»¬éƒ½å®ç°äº†åŒæ ·çš„æ¥å£ï¼Œ å‡å¯ç”¨äºè¿›è¡Œæ”¯ä»˜ã€‚ æ¶ˆè´¹è€…ä¼šéå¸¸æ»¡æ„ï¼Œ å› ä¸ºä¸å¿…éšèº«æºå¸¦å¤§é‡ç°é‡‘ï¼› å•†åº—è€æ¿åŒæ ·ä¼šååˆ†é«˜å…´ï¼Œ å› ä¸ºäº¤æ˜“æ”¶å…¥èƒ½ä»¥ç”µå­åŒ–çš„æ–¹å¼è¿›å…¥å•†åº—çš„é“¶è¡Œè´¦æˆ·ä¸­ï¼Œ æ— éœ€æ‹…å¿ƒå­˜æ¬¾æ—¶å‡ºç°ç°é‡‘ä¸¢å¤±æˆ–è¢«æŠ¢åŠ«çš„æƒ…å†µã€‚

#### ç®€å•æ€»ç»“

**ä»£ç†æ¨¡å¼**æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ è®©ä½ èƒ½å¤Ÿæä¾›å¯¹è±¡çš„æ›¿ä»£å“æˆ–å…¶å ä½ç¬¦ã€‚ ä»£ç†æ§åˆ¶ç€å¯¹äºåŸå¯¹è±¡çš„è®¿é—®ï¼Œ å¹¶å…è®¸åœ¨å°†è¯·æ±‚æäº¤ç»™å¯¹è±¡å‰åè¿›è¡Œä¸€äº›å¤„ç†ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  ä½ å¯ä»¥åœ¨å®¢æˆ·ç«¯æ¯«æ— å¯Ÿè§‰çš„æƒ…å†µä¸‹æ§åˆ¶æœåŠ¡å¯¹è±¡ã€‚
-  å¦‚æœå®¢æˆ·ç«¯å¯¹æœåŠ¡å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸæ²¡æœ‰ç‰¹æ®Šè¦æ±‚ï¼Œ ä½ å¯ä»¥å¯¹ç”Ÿå‘½å‘¨æœŸè¿›è¡Œç®¡ç†ã€‚
-  å³ä½¿æœåŠ¡å¯¹è±¡è¿˜æœªå‡†å¤‡å¥½æˆ–ä¸å­˜åœ¨ï¼Œ ä»£ç†ä¹Ÿå¯ä»¥æ­£å¸¸å·¥ä½œã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ ä½ å¯ä»¥åœ¨ä¸å¯¹æœåŠ¡æˆ–å®¢æˆ·ç«¯åšå‡ºä¿®æ”¹çš„æƒ…å†µä¸‹åˆ›å»ºæ–°ä»£ç†ã€‚

**ç¼ºç‚¹**

- ä»£ç å¯èƒ½ä¼šå˜å¾—å¤æ‚ï¼Œ å› ä¸ºéœ€è¦æ–°å»ºè®¸å¤šç±»ã€‚
-  æœåŠ¡å“åº”å¯èƒ½ä¼šå»¶è¿Ÿã€‚

#### ä¸å…¶ä»–æ¨¡å¼çš„è”ç³»

- é€‚é…å™¨æ¨¡å¼èƒ½ä¸ºè¢«å°è£…å¯¹è±¡æä¾›ä¸åŒçš„æ¥å£ï¼Œ ä»£ç†æ¨¡å¼èƒ½ä¸ºå¯¹è±¡æä¾›ç›¸åŒçš„æ¥å£ï¼Œ è£…é¥°æ¨¡å¼åˆ™èƒ½ä¸ºå¯¹è±¡æä¾›åŠ å¼ºçš„æ¥å£ã€‚

- å¤–è§‚æ¨¡å¼ä¸ä»£ç†çš„ç›¸ä¼¼ä¹‹å¤„åœ¨äºå®ƒä»¬éƒ½ç¼“å­˜äº†ä¸€ä¸ªå¤æ‚å®ä½“å¹¶è‡ªè¡Œå¯¹å…¶è¿›è¡Œåˆå§‹åŒ–ã€‚ ä»£ç†ä¸å…¶æœåŠ¡å¯¹è±¡éµå¾ªåŒä¸€æ¥å£ï¼Œ ä½¿å¾—è‡ªå·±å’ŒæœåŠ¡å¯¹è±¡å¯ä»¥äº’æ¢ï¼Œ åœ¨è¿™ä¸€ç‚¹ä¸Šå®ƒä¸å¤–è§‚ä¸åŒã€‚

- è£…é¥°å’Œä»£ç†æœ‰ç€ç›¸ä¼¼çš„ç»“æ„ï¼Œ ä½†æ˜¯å…¶æ„å›¾å´éå¸¸ä¸åŒã€‚ è¿™ä¸¤ä¸ªæ¨¡å¼çš„æ„å»ºéƒ½åŸºäºç»„åˆåŸåˆ™ï¼Œ ä¹Ÿå°±æ˜¯è¯´ä¸€ä¸ªå¯¹è±¡åº”è¯¥å°†éƒ¨åˆ†å·¥ä½œå§”æ´¾ç»™å¦ä¸€ä¸ªå¯¹è±¡ã€‚ ä¸¤è€…ä¹‹é—´çš„ä¸åŒä¹‹å¤„åœ¨äºä»£ç†é€šå¸¸è‡ªè¡Œç®¡ç†å…¶æœåŠ¡å¯¹è±¡çš„ç”Ÿå‘½å‘¨æœŸï¼Œ è€Œè£…é¥°çš„ç”Ÿæˆåˆ™æ€»æ˜¯ç”±å®¢æˆ·ç«¯è¿›è¡Œæ§åˆ¶ã€‚

#### typescript example

```typescript
interface Door {
  open(): void
  close(): void
}

class LabDoor implements Door {
  open(): void {
    console.log('opening the lab door')
  }
  close(): void {
    console.log('closing the lab door')
  }
}

class SecuredDoor {
  protected door: Door
  protected password = '123456'
  constructor(door: Door) {
    this.door = door
  }
  open(password: string) {
    if (this.authenticate(password)) {
      this.door.open()
    } else {
      console.log('No,you cant open this door')
    }
  }

  authenticate(passwords: string) {
    return this.password == passwords
  }
  close() {
    this.door.close()
  }
}

const door = new SecuredDoor(new LabDoor())

door.open('1234567')
door.open('123456')
door.close()
```

### 6.ğŸš¡ æ¡¥æ¥æ¨¡å¼(Bridge)

#### ç°å®çš„ä¾‹å­

å‡è®¾ä½ æœ‰ä¸€ä¸ªæœ‰ä¸åŒé¡µé¢çš„ç½‘ç«™ï¼Œä½ åº”è¯¥å…è®¸ç”¨æˆ·æ›´æ”¹ä¸»é¢˜ã€‚ä½ ä¼šæ€ä¹ˆåš?ä¸ºæ¯ä¸ªä¸»é¢˜åˆ›å»ºæ¯ä¸ªé¡µé¢çš„å¤šä¸ªå‰¯æœ¬ï¼Œè¿˜æ˜¯åªåˆ›å»ºå•ç‹¬çš„ä¸»é¢˜å¹¶æ ¹æ®ç”¨æˆ·çš„åå¥½åŠ è½½å®ƒä»¬?æ¡¥ç‰Œæ¨¡å¼å…è®¸ä½ åšåè€…ï¼Œå¦‚ä¸‹å›¾

![With and without the bridge pattern](assets/bridge-2abe760d08970fcef2f3eb211b40ca9a.png)



å‡å¦‚ä½ æœ‰ä¸€ä¸ªå‡ ä½• `å½¢çŠ¶`Shapeç±»ï¼Œ ä»å®ƒèƒ½æ‰©å±•å‡ºä¸¤ä¸ªå­ç±»ï¼š  `åœ†å½¢`Circleå’Œ `æ–¹å½¢`Square ã€‚ ä½ å¸Œæœ›å¯¹è¿™æ ·çš„ç±»å±‚æ¬¡ç»“æ„è¿›è¡Œæ‰©å±•ä»¥ä½¿å…¶åŒ…å«é¢œè‰²ï¼Œ æ‰€ä»¥ä½ æ‰“ç®—åˆ›å»ºåä¸º `çº¢è‰²`Redå’Œ `è“è‰²`Blueçš„å½¢çŠ¶å­ç±»ã€‚ ä½†æ˜¯ï¼Œ ç”±äºä½ å·²æœ‰ä¸¤ä¸ªå­ç±»ï¼Œ æ‰€ä»¥æ€»å…±éœ€è¦åˆ›å»ºå››ä¸ªç±»æ‰èƒ½è¦†ç›–æ‰€æœ‰ç»„åˆï¼Œ ä¾‹å¦‚ `è“è‰²åœ†å½¢`BlueÂ­Circleå’Œ `çº¢è‰²æ–¹å½¢`RedÂ­Square ã€‚

![æ¡¥æ¥æ¨¡å¼è§£å†³çš„é—®é¢˜](assets/bridge-problem-f3bb0dbe9d551b3aceb6172681b4e124.png)

æ‰€æœ‰ç»„åˆç±»çš„æ•°é‡å°†ä»¥å‡ ä½•çº§æ•°å¢é•¿ã€‚

åœ¨å±‚æ¬¡ç»“æ„ä¸­æ–°å¢å½¢çŠ¶å’Œé¢œè‰²å°†å¯¼è‡´ä»£ç å¤æ‚ç¨‹åº¦æŒ‡æ•°å¢é•¿ã€‚ ä¾‹å¦‚æ·»åŠ ä¸‰è§’å½¢çŠ¶ï¼Œ ä½ éœ€è¦æ–°å¢ä¸¤ä¸ªå­ç±»ï¼Œ ä¹Ÿå°±æ˜¯æ¯ç§é¢œè‰²ä¸€ä¸ªï¼› æ­¤åæ–°å¢ä¸€ç§æ–°é¢œè‰²éœ€è¦æ–°å¢ä¸‰ä¸ªå­ç±»ï¼Œ å³æ¯ç§å½¢çŠ¶ä¸€ä¸ªã€‚ å¦‚æ­¤ä»¥å¾€ï¼Œ æƒ…å†µä¼šè¶Šæ¥è¶Šç³Ÿç³•ã€‚

é—®é¢˜çš„æ ¹æœ¬åŸå› æ˜¯æˆ‘ä»¬è¯•å›¾åœ¨ä¸¤ä¸ªç‹¬ç«‹çš„ç»´åº¦â€”â€”å½¢çŠ¶ä¸é¢œè‰²â€”â€”ä¸Šæ‰©å±•å½¢çŠ¶ç±»ã€‚ è¿™åœ¨å¤„ç†ç±»ç»§æ‰¿æ—¶æ˜¯å¾ˆå¸¸è§çš„é—®é¢˜ã€‚

æ¡¥æ¥æ¨¡å¼é€šè¿‡å°†ç»§æ‰¿æ”¹ä¸ºç»„åˆçš„æ–¹å¼æ¥è§£å†³è¿™ä¸ªé—®é¢˜ã€‚ å…·ä½“æ¥è¯´ï¼Œ å°±æ˜¯æŠ½å–å…¶ä¸­ä¸€ä¸ªç»´åº¦å¹¶ä½¿ä¹‹æˆä¸ºç‹¬ç«‹çš„ç±»å±‚æ¬¡ï¼Œ è¿™æ ·å°±å¯ä»¥åœ¨åˆå§‹ç±»ä¸­å¼•ç”¨è¿™ä¸ªæ–°å±‚æ¬¡çš„å¯¹è±¡ï¼Œ ä»è€Œä½¿å¾—ä¸€ä¸ªç±»ä¸å¿…æ‹¥æœ‰æ‰€æœ‰çš„çŠ¶æ€å’Œè¡Œä¸ºã€‚

![æ¡¥æ¥æ¨¡å¼çš„è§£å†³æ–¹æ¡ˆ](assets/bridge-solution-c96115c7cb06311d8e5df8b133c306c7.png)

å°†ä¸€ä¸ªç±»å±‚æ¬¡è½¬åŒ–ä¸ºå¤šä¸ªç›¸å…³çš„ç±»å±‚æ¬¡ï¼Œ é¿å…å•ä¸ªç±»å±‚æ¬¡çš„å¤±æ§ã€‚

æ ¹æ®è¯¥æ–¹æ³•ï¼Œ æˆ‘ä»¬å¯ä»¥å°†é¢œè‰²ç›¸å…³çš„ä»£ç æŠ½å–åˆ°æ‹¥æœ‰ `çº¢è‰²`å’Œ `è“è‰²`ä¸¤ä¸ªå­ç±»çš„é¢œè‰²ç±»ä¸­ï¼Œ ç„¶ååœ¨ `å½¢çŠ¶`ç±»ä¸­æ·»åŠ ä¸€ä¸ªæŒ‡å‘æŸä¸€é¢œè‰²å¯¹è±¡çš„å¼•ç”¨æˆå‘˜å˜é‡ã€‚ ç°åœ¨ï¼Œ å½¢çŠ¶ç±»å¯ä»¥å°†æ‰€æœ‰ä¸é¢œè‰²ç›¸å…³çš„å·¥ä½œå§”æ´¾ç»™è¿å…¥çš„é¢œè‰²å¯¹è±¡ã€‚ è¿™æ ·çš„å¼•ç”¨å°±æˆä¸ºäº† `å½¢çŠ¶`å’Œ `é¢œè‰²`ä¹‹é—´çš„æ¡¥æ¢ã€‚ æ­¤åï¼Œ æ–°å¢é¢œè‰²å°†ä¸å†éœ€è¦ä¿®æ”¹å½¢çŠ¶çš„ç±»å±‚æ¬¡ï¼Œ åä¹‹äº¦ç„¶ã€‚
#### ç®€å•æ€»ç»“

**æ¡¥æ¥æ¨¡å¼**æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ å¯å°†ä¸€ä¸ªå¤§ç±»æˆ–ä¸€ç³»åˆ—ç´§å¯†ç›¸å…³çš„ç±»æ‹†åˆ†ä¸ºæŠ½è±¡å’Œå®ç°ä¸¤ä¸ªç‹¬ç«‹çš„å±‚æ¬¡ç»“æ„ï¼Œ ä»è€Œèƒ½åœ¨å¼€å‘æ—¶åˆ†åˆ«ä½¿ç”¨ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

- ä½ å¯ä»¥åˆ›å»ºä¸å¹³å°æ— å…³çš„ç±»å’Œç¨‹åºã€‚
-  å®¢æˆ·ç«¯ä»£ç ä»…ä¸é«˜å±‚æŠ½è±¡éƒ¨åˆ†è¿›è¡Œäº’åŠ¨ï¼Œ ä¸ä¼šæ¥è§¦åˆ°å¹³å°çš„è¯¦ç»†ä¿¡æ¯ã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ ä½ å¯ä»¥æ–°å¢æŠ½è±¡éƒ¨åˆ†å’Œå®ç°éƒ¨åˆ†ï¼Œ ä¸”å®ƒä»¬ä¹‹é—´ä¸ä¼šç›¸äº’å½±å“ã€‚
-  *å•ä¸€èŒè´£åŸåˆ™*ã€‚ æŠ½è±¡éƒ¨åˆ†ä¸“æ³¨äºå¤„ç†é«˜å±‚é€»è¾‘ï¼Œ å®ç°éƒ¨åˆ†å¤„ç†å¹³å°ç»†èŠ‚ã€‚

**ç¼ºç‚¹**

-  å¯¹é«˜å†…èšçš„ç±»ä½¿ç”¨è¯¥æ¨¡å¼å¯èƒ½ä¼šè®©ä»£ç æ›´åŠ å¤æ‚ã€‚

#### typescript example

è¿™é‡Œå®ç°é‚£ä¸ªç½‘é¡µæ¢ä¸»é¢˜çš„ä¾‹å­

```typescript
abstract class WebPage {
  protected abstract theme: Theme

  abstract getContent(): string
}

class About extends WebPage {
  protected theme: Theme
  constructor(theme: Theme) {
    super()
    this.theme = theme
  }
  getContent(): string {
    return `about page in ${this.theme.getColor()}`
  }
}

interface Theme {
  getColor(): string
}

class Careers extends WebPage {
  protected theme: Theme
  constructor(theme: Theme) {
    super()
    this.theme = theme
  }
  getContent() {
    return `careers page in ${this.theme.getColor()}`
  }
}

class DarkTheme implements Theme {
  getColor(): string {
    return 'Dark Black'
  }
}

class LightTheme implements Theme {
  getColor(): string {
    return 'Off white'
  }
}

class AquaTheme implements Theme {
  getColor(): string {
    return 'Light blue'
  }
}

const darkTheme = new DarkTheme()
const about = new About(darkTheme)
const careers = new Careers(darkTheme)
console.log(about.getContent())
console.log(careers.getContent())

```

### 7.ğŸƒäº«å…ƒæ¨¡å¼(Flyweight)

**äº¦ç§°ï¼š** ç¼“å­˜ã€Cache

#### ç°å®çš„ä¾‹å­

ä½ åœ¨ä»€ä¹ˆæ‘Šä½ä¸Šå–è¿‡æ–°é²œçš„èŒ¶å—?ä»–ä»¬é€šå¸¸ä¼šåˆ¶ä½œä¸æ­¢ä¸€ä¸ªæ¯å­ï¼Œé™¤äº†ä½ ä½¿ç”¨çš„é‚£ä¸ªï¼Œå‰©ä¸‹çš„ç•™ç»™å…¶ä»–å®¢æˆ·ï¼Œä»¥èŠ‚çœèµ„æºã€‚Flyweightæ¨¡å¼å°±æ˜¯å…³äºèµ„æºå…±äº«çš„ã€‚

#### ç®€å•æ€»ç»“

**äº«å…ƒæ¨¡å¼**æ˜¯ä¸€ç§ç»“æ„å‹è®¾è®¡æ¨¡å¼ï¼Œ å®ƒæ‘’å¼ƒäº†åœ¨æ¯ä¸ªå¯¹è±¡ä¸­ä¿å­˜æ‰€æœ‰æ•°æ®çš„æ–¹å¼ï¼Œ é€šè¿‡å…±äº«å¤šä¸ªå¯¹è±¡æ‰€å…±æœ‰çš„ç›¸åŒçŠ¶æ€ï¼Œ è®©ä½ èƒ½åœ¨æœ‰é™çš„å†…å­˜å®¹é‡ä¸­è½½å…¥æ›´å¤šå¯¹è±¡ã€‚

#### ç»´åŸºç™¾ç§‘çš„è§£é‡Š

åœ¨è®¡ç®—æœºç¼–ç¨‹ä¸­ï¼Œflyweightæ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ã€‚flyweightæ˜¯é€šè¿‡ä¸å…¶ä»–ç±»ä¼¼å¯¹è±¡å…±äº«å°½å¯èƒ½å¤šçš„æ•°æ®æ¥æœ€å°åŒ–å†…å­˜ä½¿ç”¨çš„å¯¹è±¡;å½“ä¸€ä¸ªç®€å•çš„é‡å¤è¡¨ç¤ºå°†ä½¿ç”¨ä¸å¯æ¥å—çš„å†…å­˜é‡æ—¶ï¼Œå®ƒæ˜¯ä¸€ç§å¤§é‡ä½¿ç”¨å¯¹è±¡çš„æ–¹æ³•

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  å¦‚æœç¨‹åºä¸­æœ‰å¾ˆå¤šç›¸ä¼¼å¯¹è±¡ï¼Œ é‚£ä¹ˆä½ å°†å¯ä»¥èŠ‚çœå¤§é‡å†…å­˜ã€‚

**ç¼ºç‚¹**

- ä½ å¯èƒ½éœ€è¦ç‰ºç‰²æ‰§è¡Œé€Ÿåº¦æ¥æ¢å–å†…å­˜ï¼Œ å› ä¸ºä»–äººæ¯æ¬¡è°ƒç”¨äº«å…ƒæ–¹æ³•æ—¶éƒ½éœ€è¦é‡æ–°è®¡ç®—éƒ¨åˆ†æƒ…æ™¯æ•°æ®ã€‚
-  ä»£ç ä¼šå˜å¾—æ›´åŠ å¤æ‚ã€‚ å›¢é˜Ÿä¸­çš„æ–°æˆå‘˜æ€»æ˜¯ä¼šé—®ï¼š  â€œä¸ºä»€ä¹ˆè¦åƒè¿™æ ·æ‹†åˆ†ä¸€ä¸ªå®ä½“çš„çŠ¶æ€ï¼Ÿâ€ã€‚

#### typescript example

```typescript
class KaraTea {}

interface Tea {
  [key: string]: KaraTea
}
interface Order {
  [key: number]: KaraTea
}
class TeaMaker {
  protected availableTea: Tea = {}
  make(preference: string) {
    if (!this.availableTea[preference]) {
      this.availableTea[preference] = new KaraTea()
    }
    return this.availableTea[preference]
  }
}

class Teashop {
  protected orders: Order = {}
  protected teaMaker: TeaMaker
  constructor(teaMaker: TeaMaker) {
    this.teaMaker = teaMaker
  }
  takeOrder(teaType: string, table: number) {
    this.orders[table] = this.teaMaker.make(teaType)
  }
  server() {
    for (const key in this.orders) {
      console.log(`Serving Tea to table#${key} `)
    }
  }
}

const teaMaker = new TeaMaker()
const shop = new Teashop(teaMaker)

shop.takeOrder('less sugar', 1)
shop.takeOrder('more milk', 2)
shop.takeOrder('without sugar', 5)
shop.server()
```




## è¡Œä¸ºè®¾è®¡æ¨¡å¼

è¡Œä¸ºè®¾è®¡æ¨¡å¼æ¶‰åŠåˆ°å¯¹è±¡ä¹‹é—´çš„èŒè´£åˆ†é…ï¼Œå’Œç»“æ„æ¨¡å¼çš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œå®ƒä¸ä»…æŒ‡å®šäº†ç»“æ„ï¼Œè€Œä¸”æ¦‚è¿°äº†æ¶ˆæ¯ä¼ é€’çš„æ¨¡å¼ï¼Œæ¢å¥è¯è¯´ï¼Œè¿™æœ‰åŠ©äºå›ç­”â€œå¦‚ä½•åœ¨è½¯ä»¶ç»„ç»‡ä¸­è¿è¡Œä¸€ä¸ªè¡Œä¸ºâ€ã€‚

è¿™é‡Œä»‹ç»ä»¥ä¸‹å‡ ç§:

- Chain of Responsibility
- Command
- Iterator
- Mediator
- Memento
- Observer
- Visitor
- Strategy
- State
- Template Method

### 1.ğŸ’¡ç­–ç•¥æ¨¡å¼(Strategy)

#### ç°å®ä¾‹å­

ä¸¾ä¸€ä¸ªæ’åºçš„ä¾‹å­ï¼Œæˆ‘ä»¬é¦–å…ˆå®ç°äº†å†’æ³¡æ’åºï¼Œä½†æ˜¯éšç€æ•°æ®é‡çš„å¢é•¿æˆ‘ä»¬å‘ç°å†’æ³¡æ’åºçš„æ•ˆç‡å˜å¾—å¾ˆæ…¢ï¼Œä¸ºæ­¤ï¼Œæˆ‘ä»¬åˆå®ç°äº†å¿«é€Ÿæ’åºå¤„ç†å¤§æ•°æ®ï¼Œä½†æ˜¯è¿™ä¸ªå¿«é€Ÿæ’åºå¤„ç†å°è§„æ¨¡æ•°æ®çš„æ•ˆç‡æ¯”è¾ƒä½ï¼Œæ‰€ä»¥ä¸ºäº†å¤„ç†è¿™ä¸ªé—®é¢˜ï¼Œæˆ‘ä»¬åˆå®ç°äº†ä¸€ä¸ªé’ˆå¯¹å°è§„æ¨¡æ•°æ®çš„ç­–ç•¥ï¼Œä½¿å¾—åœ¨å¤§è§„æ¨¡æ•°æ®ä¸Šä½¿ç”¨å¿«é€Ÿæ’åºï¼Œå°è§„æ¨¡æ•°æ®ä½¿ç”¨å†’æ³¡æ’åºã€‚

#### ç®€å•æ€»ç»“

ç­–ç•¥æ¨¡å¼å…è®¸æ‚¨æ ¹æ®æƒ…å†µåˆ‡æ¢ç®—æ³•æˆ–ç­–ç•¥

(å®é™…ä¸Šåœ¨jsé‡Œé¢ç”±äºå‡½æ•°æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œç¬¬ä¸€ä¸ªå‚æ•°è®¾ä¸ºå‡½æ•°ï¼Œä¹‹åä¼ å…¥ä¸åŒçš„æ’åºå‡½æ•°å°±èƒ½è¾¾æˆç±»ä¼¼çš„æ•ˆæœï¼Œä¹Ÿä¸éœ€è¦ç”¨åˆ°å¤šæ€)

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  ä½ å¯ä»¥åœ¨è¿è¡Œæ—¶åˆ‡æ¢å¯¹è±¡å†…çš„ç®—æ³•ã€‚
-  ä½ å¯ä»¥å°†ç®—æ³•çš„å®ç°å’Œä½¿ç”¨ç®—æ³•çš„ä»£ç éš”ç¦»å¼€æ¥ã€‚
-  ä½ å¯ä»¥ä½¿ç”¨ç»„åˆæ¥ä»£æ›¿ç»§æ‰¿ã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ ä½ æ— éœ€å¯¹ä¸Šä¸‹æ–‡è¿›è¡Œä¿®æ”¹å°±èƒ½å¤Ÿå¼•å…¥æ–°çš„ç­–ç•¥ã€‚

**ç¼ºç‚¹**ï¼š

-  å¦‚æœä½ çš„ç®—æ³•æå°‘å‘ç”Ÿæ”¹å˜ï¼Œ é‚£ä¹ˆæ²¡æœ‰ä»»ä½•ç†ç”±å¼•å…¥æ–°çš„ç±»å’Œæ¥å£ã€‚ ä½¿ç”¨è¯¥æ¨¡å¼åªä¼šè®©ç¨‹åºè¿‡äºå¤æ‚ã€‚
-  å®¢æˆ·ç«¯å¿…é¡»çŸ¥æ™“ç­–ç•¥é—´çš„ä¸åŒâ€”â€”å®ƒéœ€è¦é€‰æ‹©åˆé€‚çš„ç­–ç•¥ã€‚
-  è®¸å¤šç°ä»£ç¼–ç¨‹è¯­è¨€æ”¯æŒå‡½æ•°ç±»å‹åŠŸèƒ½ï¼Œ å…è®¸ä½ åœ¨ä¸€ç»„åŒ¿åå‡½æ•°ä¸­å®ç°ä¸åŒç‰ˆæœ¬çš„ç®—æ³•ã€‚ è¿™æ ·ï¼Œ ä½ ä½¿ç”¨è¿™äº›å‡½æ•°çš„æ–¹å¼å°±å’Œä½¿ç”¨ç­–ç•¥å¯¹è±¡æ—¶å®Œå…¨ç›¸åŒï¼Œ æ— éœ€å€ŸåŠ©é¢å¤–çš„ç±»å’Œæ¥å£æ¥ä¿æŒä»£ç ç®€æ´ã€‚

#### typescript example

typescript ç»™JavaScriptæ·»åŠ äº†æ›´å®Œå–„çš„é¢å‘å¯¹è±¡æ”¯æŒï¼Œæ”¯æŒç±»å‹å’Œinterface

ä¸‹é¢æ˜¯ç”¨typescriptå®ç°è¿™ä¸ªæ’åºçš„ä¾‹å­çš„ä»£ç 

```typescript
interface SortStrategy {
  sort(arr: Array<number>): Array<number>
}

class BubbleSortStrategy implements SortStrategy {
  sort(arr: number[]): number[] {
    console.log('do bubble sort')
    return arr
  }
}

class QuickSortStrategy implements SortStrategy {
  sort(arr: number[]): number[] {
    console.log('do quick sort')
    return arr
  }
}

class Sorter {
  sortStrategy: SortStrategy
  constructor(sortStrategy: SortStrategy) {
    this.sortStrategy = sortStrategy
  }
  sort(arr: Array<number>): Array<number> {
    return this.sortStrategy.sort(arr)
  }
}

new Sorter(new BubbleSortStrategy()).sort([9, 2, 4, 3, 5])
new Sorter(new QuickSortStrategy()).sort([9, 2, 4, 3, 5])

```

å®é™…ä¸Šæœ€åç”Ÿæˆes5çš„ä»£ç ï¼Œé‡Œé¢å°±æ²¡æœ‰æ¥å£äº†ï¼Œ

JavaScriptçš„å¤šæ€å’Œpythonä¸€æ ·ï¼Œæ˜¯é€šè¿‡é¸­å­ç±»å‹å®ç°çš„ã€‚

```javascript
"use strict";
var BubbleSortStrategy = /** @class */ (function () {
    function BubbleSortStrategy() {
    }
    BubbleSortStrategy.prototype.sort = function (arr) {
        console.log('do bubble sort');
        return arr;
    };
    return BubbleSortStrategy;
}());
var QuickSortStrategy = /** @class */ (function () {
    function QuickSortStrategy() {
    }
    QuickSortStrategy.prototype.sort = function (arr) {
        console.log('do quick sort');
        return arr;
    };
    return QuickSortStrategy;
}());
var Sorter = /** @class */ (function () {
    function Sorter(sortStrategy) {
        this.sortStrategy = sortStrategy;
    }
    Sorter.prototype.sort = function (arr) {
        return this.sortStrategy.sort(arr);
    };
    return Sorter;
}());
new Sorter(new BubbleSortStrategy()).sort([9, 2, 4, 3, 5]);
new Sorter(new QuickSortStrategy()).sort([9, 2, 4, 3, 5]);
```

ä¸‹é¢æ˜¯æŒ‰ç…§head first è®¾è®¡æ¨¡å¼ï¼Œè¿™æœ¬ä¹¦ç¬¬ä¸€ä¸ªä¾‹å­å®ç°çš„é¸­å­æ¨¡æ‹Ÿå™¨ä»£ç ã€‚

ä½¿ç”¨äº†ç­–ç•¥æ¨¡å¼ï¼ŒæŠŠç»™é¸­å­æ·»åŠ å„ç§è¡Œä¸ºçš„ä»£ç æŠ½ç¦»å‡ºæ¥äº†ï¼Œä½¿å¾—æ·»åŠ æ–°çš„è¡Œä¸ºçš„ä»£ç æ”¹åŠ¨æ¯”è¾ƒå°ï¼Œå¹¶ä¸”å¯ä»¥åŠ¨æ€æ”¹å˜è¡Œä¸ºã€‚

```typescript
interface FlyBehavior {
  fly(): void
}
class FlyWithWings implements FlyBehavior {
  fly(): void {
    console.log('i can fly')
  }
}
class FlyNoWay implements FlyBehavior {
  fly(): void {
    console.log('i can not fly')
  }
}
class FlyRocketPowered implements FlyBehavior {
  fly(): void {
    console.log('fly with a rocket!!!!!!!')
  }
}

interface QuackBehavior {
  quack(): void
}
class Quack implements QuackBehavior {
  quack(): void {
    console.log('quack!!!')
  }
}

class MuteQuack implements QuackBehavior {
  quack(): void {
    console.log('<<Silence>>')
  }
}

abstract class Duck {
  abstract flyBehavior: FlyBehavior
  abstract quackBehavior: QuackBehavior
  abstract display(): void
  performFly(): void {
    this.flyBehavior.fly()
  }
  performQuack(): void {
    this.quackBehavior.quack()
  }
  swim(): void {
    console.log('All ducks float,even decoys')
  }
}
class MallardDuck extends Duck {
  flyBehavior: FlyBehavior = new FlyWithWings()
  quackBehavior: QuackBehavior = new Quack()
  display(): void {
    console.log('this is MallarDuck')
    this.performQuack()
    this.performFly()
    this.swim()
  }
}

class ModelDuck extends Duck {
  flyBehavior: FlyBehavior = new FlyRocketPowered()
  quackBehavior: QuackBehavior = new MuteQuack()
  display(): void {
    console.log('this is model duck')
    this.performQuack()
    this.performFly()
    this.swim()
  }
}

class DuckCall extends Quack {}
// const duck1 = new TestDuck()
// duck1.performFly()
// duck1.performQuack()
new MallardDuck().display()
new ModelDuck().display()
new DuckCall().quack()

```



#### golang example

goè¯­è¨€æ²¡æœ‰ç»§æ‰¿ï¼Œgoè¯­è¨€çš„interfaceä¹Ÿæ¯”è¾ƒè½»é‡ï¼Œç±»ä¼¼äºpythonå’Œjsè¿™æ ·çš„é¸­å­ç±»å‹äº†ï¼Œåªæ˜¯å¤šäº†ç±»å‹æ£€æŸ¥è€Œå·²ï¼Œç¼–è¯‘é˜¶æ®µæ‰¾ä¸åˆ°å¯¹åº”çš„å‡½æ•°å°±ä¼šæŠ¥é”™äº†ã€‚

golangçš„interfaceåªèƒ½åŒ…å«å‡½æ•°ï¼Œç„¶åå®ç°è¿™ä¸ªinterfaceåªè¦å®ç°åŒæ ·æ ¼å¼çš„å‡½æ•°å°±ç®—å®ç°æ¥å£ã€‚

æ•´ä½“æ¥è¯´è¿˜æ˜¯æ¯”è¾ƒçµæ´»çš„ï¼Œæ¯”è¾ƒç®€æ´çš„ã€‚æ‰€ä»¥ä¸€ä¸ªç©ºæ¥å£interface{}æ‰€æœ‰ç±»å‹éƒ½å®ç°äº†å®ƒï¼Œå¯ä»¥ç”¨ç©ºæ¥å£æ¥æ”¶æ‰€æœ‰ç±»å‹ã€‚

```go
package main

import "fmt"

type SortStrategyer interface {
	sort(list []int) []int
}

type BubbleSortStrategy struct {
}

func (b *BubbleSortStrategy) sort(list []int) []int {
	fmt.Println("do bubble sort")
	return list
}

type QuickSortStrategy struct {
}

func (b *QuickSortStrategy) sort(list []int) []int {
	fmt.Println("do quick sort")
	return list
}

type Sorter struct {
	strategy SortStrategyer
}

func (s *Sorter) doSort(list []int) []int {
	return s.strategy.sort(list)
}

func main() {
	testList := []int{4, 5, 3}
	sort1 := Sorter{strategy: &BubbleSortStrategy{}}
	sort1.doSort(testList)
	sort2 := Sorter{strategy: &QuickSortStrategy{}}
	sort2.doSort(testList)
	sort1.strategy = &QuickSortStrategy{}
	sort1.doSort(testList)
}

```

#### dart example

dart æ˜¯æˆ‘ç”¨çš„å‡ ç§ç¼–ç¨‹è¯­è¨€ä¸­è¯­æ³•æœ€æ¥è¿‘javaçš„ã€‚

typescriptä¹Ÿå¾ˆåƒjavaï¼Œä½†æ˜¯å®ƒè·Ÿgoä¸€æ ·æŠŠç±»å‹æ”¾åœ¨å˜é‡åé¢äº†ã€‚

dartçš„ä¸åŒä¹‹å¤„åœ¨äºï¼Œdartä¸­æ²¡æœ‰åƒjavaä¸€æ ·çš„interfaceå…³é”®å­—ï¼Œdartä¸­æ¯ä¸ªç±»éƒ½å¯ä»¥å½“ä½œæ¥å£ï¼Œå› æ­¤è¿™é‡Œæˆ‘ä»¬ç”¨äº†æŠ½è±¡ç±»ä½œä¸ºä¸€ä¸ªæ¥å£ä½¿ç”¨ã€‚

```dart
abstract class SortStrategy {
  List<int> sort(List<int> data);
}

class BubbleSortStrategy implements SortStrategy {
  @override
  List<int> sort(List<int> data) {
    print('do bubble sort');
    return data;
  }
}

class QuickSortStrategy implements SortStrategy {
  @override
  List<int> sort(List<int> data) {
    print('do qucik sort');
    return data;
  }
}

class Sorter {
  final SortStrategy sortStrategy;
// datr æ„é€ å‡½æ•°è¯­æ³•ç³–ï¼Œåªéœ€è¦åœ¨å‚æ•°åˆ—è¡¨åˆ—å‡ºåˆå§‹åŒ–å‚æ•°ï¼Œèµ‹å€¼è‡ªåŠ¨å¸®ä½ å®ç°
  Sorter(this.sortStrategy);

  List<int> doSort(List<int> data) {
    return this.sortStrategy.sort(data);
  }
}

main(List<String> args) {
  var sort1 = Sorter(BubbleSortStrategy());
  sort1.doSort([1, 2, 3]);
  var sort2 = Sorter(QuickSortStrategy());
  sort2.doSort([1, 2, 3]);
}

```



### 2.ğŸ˜è§‚å¯Ÿè€…æ¨¡å¼(Observer)

#### ç°å®ä¾‹å­

ä¹Ÿå«åšå‘å¸ƒè®¢é˜…æ¨¡å¼,è¿™é‡Œç»™å‡ºçš„ä¾‹å­æ˜¯,æ±‚èŒè€…è®¢é˜…äº†æ‹›è˜ç½‘ç«™çš„æœåŠ¡,å¦‚æœæœ‰åŒ¹é…çš„å·¥ä½œä¿¡æ¯,æ‹›è˜ç½‘ç«™ä¼šè¿›è¡Œæ¨é€



#### ç®€å•æ€»ç»“

å»ºç«‹å¯¹è±¡é—´çš„ä¾èµ–å…³ç³»ï¼Œä½¿å¾—ä¸€ä¸ªå¯¹è±¡çš„çŠ¶æ€å‘ç”Ÿæ”¹å˜æ—¶ï¼Œæ‰€æœ‰ä¾èµ–å®ƒçš„å¯¹è±¡éƒ½èƒ½è¢«é€šçŸ¥åˆ°ã€‚



#### ç»´åŸºç™¾ç§‘çš„æè¿°

è§‚å¯Ÿè€…æ¨¡å¼æ˜¯ä¸€ç§è½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªç§°ä¸ºä¸»ä½“çš„å¯¹è±¡ç»´æŠ¤ä¸€ä¸ªç§°ä¸ºè§‚å¯Ÿè€…çš„ä¾èµ–é¡¹åˆ—è¡¨ï¼Œå¹¶åœ¨ä»»ä½•çŠ¶æ€æ›´æ”¹æ—¶è‡ªåŠ¨é€šçŸ¥å®ƒä»¬(é€šå¸¸é€šè¿‡è°ƒç”¨å®ƒä»¬çš„ä¸€ä¸ªæ–¹æ³•)ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  *å¼€é—­åŸåˆ™*ã€‚ ä½ æ— éœ€ä¿®æ”¹å‘å¸ƒè€…ä»£ç å°±èƒ½å¼•å…¥æ–°çš„è®¢é˜…è€…ç±» ï¼ˆå¦‚æœæ˜¯å‘å¸ƒè€…æ¥å£åˆ™å¯è½»æ¾å¼•å…¥å‘å¸ƒè€…ç±»ï¼‰ã€‚
-  ä½ å¯ä»¥åœ¨è¿è¡Œæ—¶å»ºç«‹å¯¹è±¡ä¹‹é—´çš„è”ç³»ã€‚

#### typescript example



```typescript
interface Subject {
  registerObserver(o: Observer): void
  removeObserver(o: Observer): void
  notifyObservers(info: any): void
}

interface Observer {
  update(s: Subject, arg: Object): void
}

class JobInfo {
  protected info: string
  constructor(info: string) {
    this.info = info
  }
  getInfo() {
    return this.info
  }
}

class JobSite implements Subject {
  protected observers: Array<Observer>
  constructor() {
    this.observers = Array<Observer>()
  }
  registerObserver(o: Observer): void {
    this.observers.push(o)
  }
  removeObserver(o: Observer): void {
    const index = this.observers.indexOf(o)
    this.observers.splice(index, 1)
  }
  notifyObservers(info: JobInfo): void {
    for (const o of this.observers) {
      o.update(this, info)
    }
  }

  AddJob(info: JobInfo) {
    console.log('æ‹›è˜ç½‘ç«™æœ‰æ–°çš„å·¥ä½œè¿½åŠ äº†')

    this.notifyObservers(info)
  }
}

class Jiucai implements Observer {
  name: string
  constructor(name: string) {
    this.name = name
  }
  update(s: Subject, arg: JobInfo): void {
    console.log(`${this.name}æ”¶åˆ°æ–°å·¥ä½œæ¨é€ï¼ŒèŒä½æ˜¯${arg.getInfo()}`)
  }
}

const zibenjia = new JobSite()

const jiucai1 = new Jiucai('ç”Ÿå‘½1å·')
const jiucai2 = new Jiucai('è„‘ç™½é‡‘')

zibenjia.registerObserver(jiucai1)
zibenjia.registerObserver(jiucai2)

zibenjia.AddJob(new JobInfo('webå‰ç«¯'))
zibenjia.AddJob(new JobInfo('ç®—æ³•å·¥ç¨‹å¸ˆ'))

```

ä¸‹é¢æ˜¯head firstè®¾è®¡æ¨¡å¼è¿™æœ¬ä¹¦é‡Œé¢å…³äºæ°”è±¡ç«™å’Œå‘Šç¤ºæ¿çš„typescriptä»£ç å®ç°

```typescript
interface Subject {
  registerObserver(o: Observer): void
  removeObserver(o: Observer): void
  notifyObservers(): void
}

interface Observer {
  update(temp: number, humidity: number, pressure: number): void
}

interface DisplayElement {
  display(): void
}

class WeatherData implements Subject {
  private observers: Array<Observer>
  private temperature!: number
  private humidity!: number
  private pressure!: number
  constructor() {
    this.observers = Array<Observer>()
  }
  registerObserver(o: Observer): void {
    this.observers.push(o)
  }
  removeObserver(o: Observer): void {
    const index = this.observers.indexOf(o)
    this.observers.splice(index, 1)
  }
  notifyObservers(): void {
    for (const o of this.observers) {
      o.update(this.temperature, this.humidity, this.pressure)
    }
  }

  measurementsChanged() {
    this.notifyObservers()
  }
  setMeasurements(temperature: number, humidity: number, pressure: number) {
    this.temperature = temperature
    this.humidity = humidity
    this.pressure = pressure
    this.measurementsChanged()
  }
}

class CurrentConditionDisplay implements Observer, DisplayElement {
  private temperature!: number
  private humidity!: number
  private weatherData: Subject
  constructor(weatherData: Subject) {
    this.weatherData = weatherData
    this.weatherData.registerObserver(this)
  }
  update(temp: number, humidity: number, pressure: number): void {
    this.temperature = temp
    this.humidity = humidity
    this.display()
  }

  display(): void {
    console.log(
      `Current conditionsc: ${this.temperature} F degrees and ${this.humidity}% humidity`
    )
  }
}

class StatisticsConditionDisplay implements Observer, DisplayElement {
  private pressure!: number
  private weatherData: Subject
  constructor(weatherData: Subject) {
    this.weatherData = weatherData
    this.weatherData.registerObserver(this)
  }
  update(temp: number, humidity: number, pressure: number): void {
    this.pressure = pressure
    this.display()
  }

  display(): void {
    console.log(`Statistics conditionsc: ${this.pressure} pressure`)
  }
}
const wd = new WeatherData()
const ccd = new CurrentConditionDisplay(wd)
const scd = new StatisticsConditionDisplay(wd)
wd.setMeasurements(80, 65, 30.4)
wd.setMeasurements(82, 75, 28.3)
wd.setMeasurements(78, 90, 36.4)

export {}

```





#### dart example

dartä¸­Objectä¸æƒ³typescriptä¸€æ ·å¯ä»¥æ¥å—ä»»ä½•å…¶ä»–ç±»ã€‚

æ‰€ä»¥æˆ‘è¿™é‡Œå¯¹observer ç”¨äº†æ³›å‹ã€‚

```dart
abstract class Observer<T> {
  void update(Subject s, T o);
}

abstract class Subject {
  void registerObserver(Observer o);
  void removeObserver(Observer o);
  void notifyObservers(Object o);
}

class JobInfo {
  late String info;
  JobInfo(this.info);
}

class JobSite implements Subject {
  final List<Observer> observers = [];

  @override
  void registerObserver(Observer o) {
    this.observers.add(o);
  }

  @override
  void removeObserver(Observer o) {
    this.observers.remove(o);
  }

  @override
  void notifyObservers(Object o) {
    for (var item in this.observers) {
      item.update(this, o);
    }
  }

  void addJobInfo(JobInfo j) {
    print('æœ‰æ–°çš„å·¥ä½œä¿¡æ¯');
    this.notifyObservers(j);
  }
}

class Jiucai implements Observer<JobInfo> {
  final String name;

  Jiucai(this.name);
  @override
  void update(Subject s, JobInfo o) {
    print("$nameæ”¶åˆ°æ–°çš„å·¥ä½œæ¨é€ï¼ŒèŒä½æ˜¯${o.info}");
  }
}

main(List<String> args) {
  var zibenjia = JobSite();

  var jiucai1 = Jiucai('æç™½');
  var jiucai2 = Jiucai('ç™½å±…æ˜“');

  zibenjia.registerObserver(jiucai1);
  zibenjia.registerObserver(jiucai2);
  zibenjia.addJobInfo(JobInfo('AIå·¥ç¨‹å¸ˆ'));
}

```

#### golang example

```go
package main

import "fmt"

type Subject interface {
	registerObserver(o Observer)
	removeObserver(o Observer)
	notifyObservers(s Subject, o interface{})
}

type Observer interface {
	update(s Subject, o interface{})
}

type JobSite struct {
	observers []Observer
}

func (j *JobSite) registerObserver(o Observer) {
	j.observers = append(j.observers, o)
}

func (j *JobSite) removeObserver(o Observer) {
	for i := 0; i < len(j.observers); i++ {
		if o == j.observers[i] {
			j.observers = append(j.observers[:i], j.observers[i+1:]...)
			return
		}
	}
}
func (j *JobSite) notifyObservers(s Subject, o interface{}) {
	for i := 0; i < len(j.observers); i++ {
		j.observers[i].update(s, o)
	}
}
func (j *JobSite) addJobInfo(info string) {
	fmt.Println("æ–°å·¥ä½œä¿¡æ¯å…¥åº“")
	j.notifyObservers(j, info)
}

type Jiucai struct {
	name string
}

func (j *Jiucai) update(s Subject, o interface{}) {
	fmt.Printf("%sæ”¶åˆ°æ–°çš„å·¥ä½œæ¨é€ï¼ŒèŒä½æ˜¯%v\n", j.name, o)
}
func main() {
	zibenjia := JobSite{observers: []Observer{}}
	jiucai1 := Jiucai{name: "å¼ ä¸‰"}
	jiucai2 := Jiucai{name: "æå››"}
	zibenjia.registerObserver(&jiucai1)
	zibenjia.registerObserver(&jiucai2)
	zibenjia.addJobInfo("å–ç‰›å¥¶")

}

```



### 3.ğŸ‘®å‘½ä»¤æ¨¡å¼(Command)

**äº¦ç§°ï¼š** åŠ¨ä½œã€äº‹åŠ¡ã€Actionã€Transaction

#### çœŸå®ä¸–ç•Œçš„ä¾‹å­

ä¸€ä¸ªä¾‹å­æ˜¯é¤é¦†ç‚¹é¤ï¼Œ æ‚¨ï¼ˆå³å®¢æˆ·ï¼‰è¯¢é—®æœåŠ¡å‘˜ï¼ˆå³ï¼Œè°ƒç”¨è€…ï¼‰æºå¸¦ä¸€äº›é£Ÿç‰©ï¼ˆå³å‘½ä»¤ï¼‰å’ŒæœåŠ¡å‘˜åªéœ€å°†è¯¥è¯·æ±‚è½¬å‘ç»™å¨å¸ˆï¼ˆå³æ¥æ”¶è€…ï¼‰ï¼Œè¯¥è¯·æ±‚å…·æœ‰å…³äºçƒ¹é¥ªçš„å†…å®¹å’Œå¦‚ä½•çƒ¹é¥ªçš„çŸ¥è¯†ã€‚ å¦ä¸€ä¸ªä¾‹å­æ˜¯æ‚¨ï¼ˆå³å®¢æˆ·ç«¯ï¼‰ä½¿ç”¨é¥æ§å™¨ï¼ˆå³ï¼ŒCommandï¼‰çš„ç”µè§†ï¼ˆå³ï¼Œæ¥æ”¶å™¨ï¼‰æ‰“å¼€ï¼ˆå³ï¼Œæ¥æ”¶å™¨ï¼‰ã€‚

#### ç®€å•æ€»ç»“

å…è®¸æ‚¨åœ¨å¯¹è±¡ä¸­å°è£…åŠ¨ä½œã€‚æ­¤æ¨¡å¼èƒŒåçš„å…³é”®æ€æƒ³æ˜¯æä¾›åˆ†ç¦»å®¢æˆ·æœºä¸æ¥æ”¶è€…çš„æ–¹æ³•ã€‚

#### ç»´åŸºç™¾ç§‘çš„è§£é‡Š

åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œå‘½ä»¤æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œåœ¨è¿™ç§æ¨¡å¼ä¸­ï¼Œä¸€ä¸ªå¯¹è±¡è¢«ç”¨æ¥å°è£…åœ¨ä»¥åæ‰§è¡Œä¸€ä¸ªåŠ¨ä½œæˆ–è§¦å‘ä¸€ä¸ªäº‹ä»¶æ‰€éœ€çš„æ‰€æœ‰ä¿¡æ¯ã€‚è¯¥ä¿¡æ¯åŒ…æ‹¬æ–¹æ³•åã€æ‹¥æœ‰è¯¥æ–¹æ³•çš„å¯¹è±¡å’Œæ–¹æ³•å‚æ•°çš„å€¼ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

- *å•ä¸€èŒè´£åŸåˆ™*ã€‚ ä½ å¯ä»¥è§£è€¦è§¦å‘å’Œæ‰§è¡Œæ“ä½œçš„ç±»ã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ ä½ å¯ä»¥åœ¨ä¸ä¿®æ”¹å·²æœ‰å®¢æˆ·ç«¯ä»£ç çš„æƒ…å†µä¸‹åœ¨ç¨‹åºä¸­åˆ›å»ºæ–°çš„å‘½ä»¤ã€‚
-  ä½ å¯ä»¥å®ç°æ’¤é”€å’Œæ¢å¤åŠŸèƒ½ã€‚
-  ä½ å¯ä»¥å®ç°æ“ä½œçš„å»¶è¿Ÿæ‰§è¡Œã€‚
-  ä½ å¯ä»¥å°†ä¸€ç»„ç®€å•å‘½ä»¤ç»„åˆæˆä¸€ä¸ªå¤æ‚å‘½ä»¤ã€‚

**ç¼ºç‚¹**

-  ä»£ç å¯èƒ½ä¼šå˜å¾—æ›´åŠ å¤æ‚ï¼Œ å› ä¸ºä½ åœ¨å‘é€è€…å’Œæ¥æ”¶è€…ä¹‹é—´å¢åŠ äº†ä¸€ä¸ªå…¨æ–°çš„å±‚æ¬¡ã€‚

#### typescript example

ä¸‹é¢æ˜¯ä¸€ä¸ªé¥æ§å™¨æ§åˆ¶ç¯æ³¡å¼€å…³çš„å®ç°ã€‚

```typescript
// ç¯æ³¡
class Bulb {
  turnOn() {
    console.log('Bulb has been lit')
  }
  turnOff() {
    console.log('be dark')
  }
}

interface Command {
  execute(): void
  undo(): void
  redo(): void
}

class TurnOn implements Command {
  protected bulb: Bulb
  constructor(bulb: Bulb) {
    this.bulb = bulb
  }
  execute(): void {
    this.bulb.turnOn()
  }
  undo(): void {
    this.bulb.turnOff()
  }
  redo(): void {
    this.execute()
  }
}
class TurnOff implements Command {
  protected bulb: Bulb
  constructor(bulb: Bulb) {
    this.bulb = bulb
  }
  execute(): void {
    this.bulb.turnOff()
  }
  undo(): void {
    this.bulb.turnOn()
  }
  redo(): void {
    this.execute()
  }
}

class RemoteControl {
  submit(command: Command) {
    command.execute()
  }
}

const bulb = new Bulb()

const turnOn = new TurnOn(bulb)
const turnOff = new TurnOff(bulb)

const remote = new RemoteControl()
remote.submit(turnOn)
remote.submit(turnOff)

```

### 4.ğŸ“’ æ¨¡æ¿æ–¹æ³•(Template Method)

#### çœŸå®ä¸–ç•Œçš„ä¾‹å­

å‡è®¾æˆ‘ä»¬è¦å»ºæˆ¿å­ã€‚å»ºé€ çš„æ­¥éª¤å¯èƒ½åƒè¿™æ ·

- å‡†å¤‡å¥½æˆ¿å­çš„åœ°åŸº

- æ„å»ºå¢™

- æ·»åŠ å±‹é¡¶

- æ·»åŠ å…¶ä»–æ¥¼å±‚

è¿™äº›æ­¥éª¤çš„é¡ºåºæ°¸è¿œä¸ä¼šæ”¹å˜ï¼Œä¾‹å¦‚ï¼Œä½ ä¸èƒ½åœ¨å»ºé€ å¢™å£ä¹‹å‰å»ºé€ å±‹é¡¶ï¼Œä½†æ¯ä¸ªæ­¥éª¤éƒ½å¯ä»¥ä¿®æ”¹ï¼Œä¾‹å¦‚ï¼Œå¢™å£å¯ä»¥ç”±æœ¨æã€èšé…¯æˆ–çŸ³å¤´åˆ¶æˆã€‚

#### ç®€å•æ€»ç»“

æ¨¡æ¿æ–¹æ³•å®šä¹‰äº†å¦‚ä½•æ‰§è¡ŒæŸä¸ªç®—æ³•çš„æ¡†æ¶ï¼Œä½†å°†è¿™äº›æ­¥éª¤çš„å®ç°æ¨è¿Ÿåˆ°å­ç±»ã€‚

#### ç»´åŸºç™¾ç§‘çš„æè¿°

åœ¨è½¯ä»¶å·¥ç¨‹ä¸­ï¼Œæ¨¡æ¿æ–¹æ³•æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œå®ƒåœ¨æ“ä½œä¸­å®šä¹‰ç®—æ³•çš„ç¨‹åºæ¡†æ¶ï¼Œå°†ä¸€äº›æ­¥éª¤æ¨è¿Ÿåˆ°å­ç±»ä¸­ã€‚å®ƒå…è®¸äººä»¬åœ¨ä¸æ”¹å˜ç®—æ³•ç»“æ„çš„æƒ…å†µä¸‹é‡æ–°å®šä¹‰ç®—æ³•çš„æŸäº›æ­¥éª¤ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  ä½ å¯ä»…å…è®¸å®¢æˆ·ç«¯é‡å†™ä¸€ä¸ªå¤§å‹ç®—æ³•ä¸­çš„ç‰¹å®šéƒ¨åˆ†ï¼Œ ä½¿å¾—ç®—æ³•å…¶ä»–éƒ¨åˆ†ä¿®æ”¹å¯¹å…¶æ‰€é€ æˆçš„å½±å“å‡å°ã€‚
-  ä½ å¯å°†é‡å¤ä»£ç æå–åˆ°ä¸€ä¸ªè¶…ç±»ä¸­ã€‚

**ç¼ºç‚¹**

-  éƒ¨åˆ†å®¢æˆ·ç«¯å¯èƒ½ä¼šå—åˆ°ç®—æ³•æ¡†æ¶çš„é™åˆ¶ã€‚
-  é€šè¿‡å­ç±»æŠ‘åˆ¶é»˜è®¤æ­¥éª¤å®ç°å¯èƒ½ä¼šå¯¼è‡´è¿å_é‡Œæ°æ›¿æ¢åŸåˆ™_(å³æ´¾ç”Ÿç±»å¯ä»¥åœ¨ç¨‹åºä¸­æ›¿æ¢åŸºç±»å¯¹è±¡)ã€‚
-  æ¨¡æ¿æ–¹æ³•ä¸­çš„æ­¥éª¤è¶Šå¤šï¼Œ å…¶ç»´æŠ¤å·¥ä½œå°±å¯èƒ½ä¼šè¶Šå›°éš¾ã€‚

#### typescript example

å‡è®¾æˆ‘ä»¬æœ‰ä¸€ä¸ªæ„å»ºå·¥å…·ï¼Œå¯ä»¥å¸®åŠ©æˆ‘ä»¬æµ‹è¯•ã€lintã€æ„å»ºã€ç”Ÿæˆæ„å»ºæŠ¥å‘Š(å³ä»£ç è¦†ç›–æŠ¥å‘Šã€lintingæŠ¥å‘Šç­‰)ï¼Œå¹¶å°†æˆ‘ä»¬çš„åº”ç”¨éƒ¨ç½²åˆ°æµ‹è¯•æœåŠ¡å™¨ä¸Šã€‚é¦–å…ˆï¼Œæˆ‘ä»¬æœ‰ä¸ºæ„å»ºç®—æ³•æŒ‡å®šéª¨æ¶çš„åŸºç±»

```typescript
abstract class Builder {
  build() {
    this.test()
    this.lint()
    this.assemble()
    this.deploy()
  }
  abstract test(): void
  abstract lint(): void
  abstract assemble(): void
  abstract deploy(): void
}

class AndroidBuilder extends Builder {
  test(): void {
    console.log('Running android test')
  }
  lint(): void {
    console.log('Linting the android code.')
  }
  assemble(): void {
    console.log('Assembling the andorid build.')
  }
  deploy(): void {
    console.log('Deploying android build to server')
  }
}

class IosBuilder extends Builder {
  test(): void {
    console.log('Running ios test')
  }
  lint(): void {
    console.log('Linting the ios code.')
  }
  assemble(): void {
    console.log('Assembling the ios build.')
  }
  deploy(): void {
    console.log('Deploying ios build to server')
  }
}

const androidBuilder = new AndroidBuilder()
androidBuilder.build()
const iosBuilder = new IosBuilder()
iosBuilder.build()

```

### 5.â¿è¿­ä»£å™¨æ¨¡å¼ (Iterator)

#### ç°å®çš„ä¾‹å­

ä¸€ä¸ªæ—§çš„æ”¶éŸ³æœºå°†æ˜¯è¿­ä»£å™¨çš„ä¸€ä¸ªå¾ˆå¥½çš„ä¾‹å­ï¼Œç”¨æˆ·å¯ä»¥ä»æŸä¸ªæ‹¼æ­å¼€å§‹ï¼Œç„¶åä½¿ç”¨ä¸‹ä¸€ä¸ªæˆ–ä¸Šä¸€ä¸ªæŒ‰é’®é€šè¿‡ç›¸åº”çš„é€šé“ã€‚æˆ–è€…ä»¥MP3æ’­æ”¾å™¨æˆ–ç”µè§†æœºä¸ºä¾‹ï¼Œä½ å¯ä»¥æŒ‰ä¸‹ä¸€ä¸ªå’Œä¸Šä¸€ä¸ªæŒ‰é’®æ¥æµè§ˆè¿ç»­çš„é¢‘é“ï¼Œæˆ–è€…æ¢å¥è¯è¯´ï¼Œå®ƒä»¬éƒ½æä¾›äº†ä¸€ä¸ªç•Œé¢æ¥è¿­ä»£å„ä¸ªé¢‘é“ã€æ­Œæ›²æˆ–ç”µå°ã€‚

åˆæ¯”å¦‚è¯´åˆ—è¡¨å’Œæ•°ç»„çš„éå†æ–¹å¼ä¸åŒ,ä½ å¯ä»¥ç”¨è¿­ä»£å™¨æ¨¡å¼æŠŠä»–ä»¬å°è£…æˆä¸€è‡´çš„ä½¿ç”¨æ–¹å¼.

#### ç®€å•æ€»ç»“

**è¿­ä»£å™¨æ¨¡å¼**æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ è®©ä½ èƒ½åœ¨ä¸æš´éœ²é›†åˆåº•å±‚è¡¨ç°å½¢å¼ ï¼ˆåˆ—è¡¨ã€ æ ˆå’Œæ ‘ç­‰ï¼‰ çš„æƒ…å†µä¸‹éå†é›†åˆä¸­æ‰€æœ‰çš„å…ƒç´ ã€‚

#### ç»´åŸºç™¾ç§‘çš„è§£é‡Š

åœ¨é¢å‘å¯¹è±¡ç¼–ç¨‹ä¸­ï¼Œè¿­ä»£å™¨æ¨¡å¼æ˜¯ä¸€ç§è®¾è®¡æ¨¡å¼ï¼Œå…¶ä¸­è¿­ä»£å™¨ç”¨äºéå†å®¹å™¨å¹¶è®¿é—®å®¹å™¨çš„å…ƒç´ ã€‚è¿­ä»£å™¨æ¨¡å¼å°†ç®—æ³•ä¸å®¹å™¨è§£è€¦;åœ¨æŸäº›æƒ…å†µä¸‹ï¼Œç®—æ³•å¿…é¡»æ˜¯ç‰¹å®šäºå®¹å™¨çš„ï¼Œå› æ­¤ä¸èƒ½è§£è€¦ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  *å•ä¸€èŒè´£åŸåˆ™*ã€‚ é€šè¿‡å°†ä½“ç§¯åºå¤§çš„éå†ç®—æ³•ä»£ç æŠ½å–ä¸ºç‹¬ç«‹çš„ç±»ï¼Œ ä½ å¯å¯¹å®¢æˆ·ç«¯ä»£ç å’Œé›†åˆè¿›è¡Œæ•´ç†ã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ ä½ å¯å®ç°æ–°å‹çš„é›†åˆå’Œè¿­ä»£å™¨å¹¶å°†å…¶ä¼ é€’ç»™ç°æœ‰ä»£ç ï¼Œ æ— éœ€ä¿®æ”¹ç°æœ‰ä»£ç ã€‚
-  ä½ å¯ä»¥å¹¶è¡Œéå†åŒä¸€é›†åˆï¼Œ å› ä¸ºæ¯ä¸ªè¿­ä»£å™¨å¯¹è±¡éƒ½åŒ…å«å…¶è‡ªèº«çš„éå†çŠ¶æ€ã€‚
-  ç›¸ä¼¼çš„ï¼Œ ä½ å¯ä»¥æš‚åœéå†å¹¶åœ¨éœ€è¦æ—¶ç»§ç»­ã€‚

**ç¼ºç‚¹**

-  å¦‚æœä½ çš„ç¨‹åºåªä¸ç®€å•çš„é›†åˆè¿›è¡Œäº¤äº’ï¼Œ åº”ç”¨è¯¥æ¨¡å¼å¯èƒ½ä¼šçŸ«æ‰è¿‡æ­£ã€‚
-  å¯¹äºæŸäº›ç‰¹æ®Šé›†åˆï¼Œ ä½¿ç”¨è¿­ä»£å™¨å¯èƒ½æ¯”ç›´æ¥éå†çš„æ•ˆç‡ä½ã€‚

#### typescript example

```typescript
/**
 * Iterator Design Pattern
 *
 * Intent: Lets you traverse elements of a collection without exposing its
 * underlying representation (list, stack, tree, etc.).
 */

interface Iterator<T> {
  // Return the current element.
  current(): T

  // Return the current element and move forward to next element.
  next(): T

  // Return the key of the current element.
  key(): number

  // Checks if current position is valid.
  valid(): boolean

  // Rewind the Iterator to the first element.
  rewind(): void
}

interface Aggregator {
  // Retrieve an external iterator.
  getIterator(): Iterator<string>
}

/**
 * Concrete Iterators implement various traversal algorithms. These classes
 * store the current traversal position at all times.
 */

class AlphabeticalOrderIterator implements Iterator<string> {
  private collection: WordsCollection

  /**
   * Stores the current traversal position. An iterator may have a lot of
   * other fields for storing iteration state, especially when it is supposed
   * to work with a particular kind of collection.
   */
  private position: number = 0

  /**
   * This variable indicates the traversal direction.
   */
  private reverse: boolean = false

  constructor(collection: WordsCollection, reverse: boolean = false) {
    this.collection = collection
    this.reverse = reverse

    if (reverse) {
      this.position = collection.getCount() - 1
    }
  }

  public rewind() {
    this.position = this.reverse ? this.collection.getCount() - 1 : 0
  }

  public current(): string {
    return this.collection.getItems()[this.position]
  }

  public key(): number {
    return this.position
  }

  public next(): string {
    const item = this.collection.getItems()[this.position]
    this.position += this.reverse ? -1 : 1
    return item
  }

  public valid(): boolean {
    if (this.reverse) {
      return this.position >= 0
    }

    return this.position < this.collection.getCount()
  }
}

/**
 * Concrete Collections provide one or several methods for retrieving fresh
 * iterator instances, compatible with the collection class.
 */
class WordsCollection implements Aggregator {
  private items: string[] = []

  public getItems(): string[] {
    return this.items
  }

  public getCount(): number {
    return this.items.length
  }

  public addItem(item: string): void {
    this.items.push(item)
  }

  public getIterator(): Iterator<string> {
    return new AlphabeticalOrderIterator(this)
  }

  public getReverseIterator(): Iterator<string> {
    return new AlphabeticalOrderIterator(this, true)
  }
}

/**
 * The client code may or may not know about the Concrete Iterator or Collection
 * classes, depending on the level of indirection you want to keep in your
 * program.
 */
const collection = new WordsCollection()
collection.addItem('First')
collection.addItem('Second')
collection.addItem('Third')

const iterator = collection.getIterator()

console.log('Straight traversal:')
while (iterator.valid()) {
  console.log(iterator.next())
}

console.log('')
console.log('Reverse traversal:')
const reverseIterator = collection.getReverseIterator()
while (reverseIterator.valid()) {
  console.log(reverseIterator.next())
}
```

### 6.ğŸ’¢ çŠ¶æ€æ¨¡å¼(State)

#### ç°å®çš„ä¾‹å­

å‡è®¾æ‚¨æ­£åœ¨ä½¿ç”¨ä¸€äº›ç»˜å›¾åº”ç”¨ç¨‹åºï¼Œæ‚¨é€‰æ‹©ç”»ç¬”è¿›è¡Œç»˜åˆ¶ã€‚ç°åœ¨ç¬”åˆ·ä¼šæ ¹æ®é€‰æ‹©çš„é¢œè‰²æ”¹å˜å®ƒçš„è¡Œä¸ºï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ é€‰æ‹©äº†çº¢è‰²ï¼Œå®ƒå°±ä¼šä»¥çº¢è‰²ç»˜åˆ¶ï¼Œå¦‚æœæ˜¯è“è‰²ï¼Œå®ƒå°±ä¼šä»¥è“è‰²ç»˜åˆ¶ï¼Œç­‰ç­‰ã€‚

æ™ºèƒ½æ‰‹æœºçš„æŒ‰é”®å’Œå¼€å…³ä¼šæ ¹æ®è®¾å¤‡å½“å‰çŠ¶æ€å®Œæˆä¸åŒè¡Œä¸ºï¼š

- å½“æ‰‹æœºå¤„äºè§£é”çŠ¶æ€æ—¶ï¼Œ æŒ‰ä¸‹æŒ‰é”®å°†æ‰§è¡Œå„ç§åŠŸèƒ½ã€‚
- å½“æ‰‹æœºå¤„äºé”å®šçŠ¶æ€æ—¶ï¼Œ æŒ‰ä¸‹ä»»ä½•æŒ‰é”®éƒ½å°†è§£é”å±å¹•ã€‚
- å½“æ‰‹æœºç”µé‡ä¸è¶³æ—¶ï¼Œ æŒ‰ä¸‹ä»»ä½•æŒ‰é”®éƒ½å°†æ˜¾ç¤ºå……ç”µé¡µé¢ã€‚

#### ç®€å•æ€»ç»“

**çŠ¶æ€æ¨¡å¼**æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ è®©ä½ èƒ½åœ¨ä¸€ä¸ªå¯¹è±¡çš„å†…éƒ¨çŠ¶æ€å˜åŒ–æ—¶æ”¹å˜å…¶è¡Œä¸ºï¼Œ ä½¿å…¶çœ‹ä¸Šå»å°±åƒæ”¹å˜äº†è‡ªèº«æ‰€å±çš„ç±»ä¸€æ ·ã€‚

#### ç»´åŸºç™¾ç§‘çš„è§£é‡Š

çŠ¶æ€æ¨¡å¼æ˜¯ä¸€ç§è¡Œä¸ºè½¯ä»¶è®¾è®¡æ¨¡å¼ï¼Œå…¶ä»¥é¢å‘å¯¹è±¡æ–¹å¼å®ç°çŠ¶æ€æœºã€‚ åˆ©ç”¨çŠ¶æ€æ¨¡å¼ï¼Œé€šè¿‡å°†æ¯ä¸ªå•ç‹¬çš„çŠ¶æ€ä½œä¸ºçŠ¶æ€æ¨¡å¼æ¥å£çš„æ´¾ç”Ÿç±»å®ç°æ¯ä¸ªå•ç‹¬çš„çŠ¶æ€æ¥å®ç°çŠ¶æ€æœºï¼Œå¹¶é€šè¿‡è°ƒç”¨ç”±æ¨¡å¼çš„è¶…ç±»å®šä¹‰çš„æ–¹æ³•æ¥å®ç°çŠ¶æ€è½¬æ¢ã€‚ çŠ¶æ€æ¨¡å¼å¯ä»¥è¢«è§£é‡Šä¸ºèƒ½å¤Ÿé€šè¿‡æ¨¡å¼æ¥å£ä¸­å®šä¹‰çš„æ–¹æ³•çš„è°ƒç”¨æ¥åˆ‡æ¢å½“å‰ç­–ç•¥çš„ç­–ç•¥æ¨¡å¼ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  *å•ä¸€èŒè´£åŸåˆ™*ã€‚ å°†ä¸ç‰¹å®šçŠ¶æ€ç›¸å…³çš„ä»£ç æ”¾åœ¨å•ç‹¬çš„ç±»ä¸­ã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ æ— éœ€ä¿®æ”¹å·²æœ‰çŠ¶æ€ç±»å’Œä¸Šä¸‹æ–‡å°±èƒ½å¼•å…¥æ–°çŠ¶æ€ã€‚
-  é€šè¿‡æ¶ˆé™¤è‡ƒè‚¿çš„çŠ¶æ€æœºæ¡ä»¶è¯­å¥ç®€åŒ–ä¸Šä¸‹æ–‡ä»£ç ã€‚

**ç¼ºç‚¹**

-  å¦‚æœçŠ¶æ€æœºåªæœ‰å¾ˆå°‘çš„å‡ ä¸ªçŠ¶æ€ï¼Œ æˆ–è€…å¾ˆå°‘å‘ç”Ÿæ”¹å˜ï¼Œ é‚£ä¹ˆåº”ç”¨è¯¥æ¨¡å¼å¯èƒ½ä¼šæ˜¾å¾—å°é¢˜å¤§ä½œã€‚

#### ä¸å…¶ä»–æ¨¡å¼çš„å…³ç³»

- **æ¡¥æ¥æ¨¡å¼**ã€ **çŠ¶æ€æ¨¡å¼**å’Œ**ç­–ç•¥æ¨¡å¼** ï¼ˆåœ¨æŸç§ç¨‹åº¦ä¸ŠåŒ…æ‹¬é€‚é…å™¨æ¨¡å¼ï¼‰ æ¨¡å¼çš„æ¥å£éå¸¸ç›¸ä¼¼ã€‚ å®é™…ä¸Šï¼Œ å®ƒä»¬éƒ½åŸºäºç»„åˆæ¨¡å¼â€”â€”å³å°†å·¥ä½œå§”æ´¾ç»™å…¶ä»–å¯¹è±¡ï¼Œ ä¸è¿‡ä¹Ÿå„è‡ªè§£å†³äº†ä¸åŒçš„é—®é¢˜ã€‚ æ¨¡å¼å¹¶ä¸åªæ˜¯ä»¥ç‰¹å®šæ–¹å¼ç»„ç»‡ä»£ç çš„é…æ–¹ï¼Œ ä½ è¿˜å¯ä»¥ä½¿ç”¨å®ƒä»¬æ¥å’Œå…¶ä»–å¼€å‘è€…è®¨è®ºæ¨¡å¼æ‰€è§£å†³çš„é—®é¢˜ã€‚

- çŠ¶æ€å¯è¢«è§†ä¸ºç­–ç•¥çš„æ‰©å±•ã€‚ ä¸¤è€…éƒ½åŸºäºç»„åˆæœºåˆ¶ï¼š å®ƒä»¬éƒ½é€šè¿‡å°†éƒ¨åˆ†å·¥ä½œå§”æ´¾ç»™ â€œå¸®æ‰‹â€ å¯¹è±¡æ¥æ”¹å˜å…¶åœ¨ä¸åŒæƒ…æ™¯ä¸‹çš„è¡Œä¸ºã€‚ ç­–ç•¥ä½¿å¾—è¿™äº›å¯¹è±¡ç›¸äº’ä¹‹é—´å®Œå…¨ç‹¬ç«‹ï¼Œ å®ƒä»¬ä¸çŸ¥é“å…¶ä»–å¯¹è±¡çš„å­˜åœ¨ã€‚ ä½†çŠ¶æ€æ¨¡å¼æ²¡æœ‰é™åˆ¶å…·ä½“çŠ¶æ€ä¹‹é—´çš„ä¾èµ–ï¼Œ ä¸”å…è®¸å®ƒä»¬è‡ªè¡Œæ”¹å˜åœ¨ä¸åŒæƒ…æ™¯ä¸‹çš„çŠ¶æ€ã€‚

#### typescript example

è®©æˆ‘ä»¬ä¸¾ä¸€ä¸ªæ–‡æœ¬ç¼–è¾‘å™¨çš„ä¾‹å­ï¼Œå®ƒå¯ä»¥è®©ä½ æ”¹å˜è¾“å…¥çš„æ–‡æœ¬çš„çŠ¶æ€ï¼Œä¾‹å¦‚ï¼Œå¦‚æœä½ é€‰æ‹©äº†ç²—ä½“ï¼Œå®ƒå°±å¼€å§‹å†™ç²—ä½“ï¼Œå¦‚æœæ˜¯æ–œä½“ï¼Œç„¶åæ˜¯æ–œä½“ç­‰ç­‰ã€‚

```typescript
interface WritingState {
  write(words: string): void
}

class UpperCase implements WritingState {
  write(words: string): void {
    console.log(`Uppercase:${words}`)
  }
}

class LowerCase implements WritingState {
  write(words: string): void {
    console.log(`Lowercase:${words}`)
  }
}

class DefaultText implements WritingState {
  write(words: string): void {
    console.log(`DefaultText:${words}`)
  }
}

class TextEditor {
  protected state: WritingState
  constructor(state: WritingState) {
    this.state = state
  }
  setState(state: WritingState) {
    this.state = state
  }
  type(words: string) {
    this.state.write(words)
  }
}

const editor = new TextEditor(new DefaultText())
editor.type('hello')
editor.setState(new UpperCase())
editor.type('1')

editor.setState(new LowerCase())

editor.type('2')

```



### 7.ğŸ”—è´£ä»»é“¾æ¨¡å¼ Chain of Responsibility

#### ç°å®çš„ä¾‹å­

ä¾‹å¦‚ï¼Œæ‚¨åœ¨æ‚¨çš„å¸æˆ·ä¸­è®¾ç½®äº†ä¸‰ä¸ªä»˜æ¬¾æ–¹å¼ï¼ˆAï¼ŒBå’ŒCï¼‰è®¾ç½®; æ¯ä¸ªéƒ½æœ‰ä¸åŒçš„é‡ã€‚ Aæœ‰100ç¾å…ƒï¼ŒBæœ‰300ç¾å…ƒï¼ŒCå…·æœ‰1000ç¾å…ƒï¼Œä½ åå¥½çš„è´­ä¹°é¡ºåºæ˜¯å…ˆAåBåC.æ‚¨å°è¯•è´­ä¹°ä»·å€¼210ç¾å…ƒçš„ä¸œè¥¿ã€‚ ä½¿ç”¨è´£ä»»é“¾ï¼Œé¦–å…ˆå°†æ£€æŸ¥å®ƒæ˜¯å¦å¯ä»¥è´­ä¹°è´­ä¹°ï¼Œå¦‚æœæ˜¯è´­ä¹°ï¼Œåˆ™å°†è¿›è¡Œè´­ä¹°ï¼Œå¹¶ä¸”é“¾å°†è¢«æ‰“ç ´ã€‚ å¦‚æœæ²¡æœ‰ï¼Œè¯·æ±‚å°†å‰è¿›ä»¥å‘å¸æˆ·Bæ£€æŸ¥é‡‘é¢å¦‚æœæ˜¯é“¾å°†è¢«æ‰“ç ´ï¼Œå¦åˆ™è¯·æ±‚å°†ç»§ç»­è½¬å‘ï¼Œç›´åˆ°å®ƒæ‰¾åˆ°åˆé€‚çš„å¤„ç†ç¨‹åºã€‚ è¿™é‡Œï¼ŒBå’ŒCæ˜¯é“¾æ¡çš„é“¾æ¥ï¼Œæ•´ä¸ªç°è±¡æ˜¯è´£ä»»é“¾ã€‚

#### ç®€å•æ€»ç»“

**è´£ä»»é“¾æ¨¡å¼**æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å…è®¸ä½ å°†è¯·æ±‚æ²¿ç€å¤„ç†è€…é“¾è¿›è¡Œå‘é€ã€‚ æ”¶åˆ°è¯·æ±‚åï¼Œ æ¯ä¸ªå¤„ç†è€…å‡å¯å¯¹è¯·æ±‚è¿›è¡Œå¤„ç†ï¼Œ æˆ–å°†å…¶ä¼ é€’ç»™é“¾ä¸Šçš„ä¸‹ä¸ªå¤„ç†è€…ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  ä½ å¯ä»¥æ§åˆ¶è¯·æ±‚å¤„ç†çš„é¡ºåºã€‚
-  *å•ä¸€èŒè´£åŸåˆ™*ã€‚ ä½ å¯å¯¹å‘èµ·æ“ä½œå’Œæ‰§è¡Œæ“ä½œçš„ç±»è¿›è¡Œè§£è€¦ã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ ä½ å¯ä»¥åœ¨ä¸æ›´æ”¹ç°æœ‰ä»£ç çš„æƒ…å†µä¸‹åœ¨ç¨‹åºä¸­æ–°å¢å¤„ç†è€…ã€‚

**ç¼ºç‚¹**

-  éƒ¨åˆ†è¯·æ±‚å¯èƒ½æœªè¢«å¤„ç†ã€‚

#### typescript example

```typescript
abstract class Account {
  protected successor: Account | null = null
  protected abstract balance: number
  setNext(account: Account) {
    this.successor = account
  }
  pay(amountToPay: number) {
    if (this.canPay(amountToPay)) {
      console.log(`paid ${amountToPay} using ${this.constructor.toString()}`)
    } else if (this.successor) {
      console.log('cant pay ,using next...')
      this.successor.pay(amountToPay)
    } else {
      throw new Error('None of the accounts have enough balance')
    }
  }
  canPay(amount: number): boolean {
    return this.balance >= amount
  }
}

class Bank extends Account {
  protected balance: number
  constructor(balance: number) {
    super()
    this.balance = balance
  }
}

class Paypal extends Account {
  protected balance: number
  constructor(balance: number) {
    super()
    this.balance = balance
  }
}

class Bitcoin extends Account {
  protected balance: number
  constructor(balance: number) {
    super()
    this.balance = balance
  }
}

const bank = new Bank(100)
const paypal = new Paypal(200)
const bitcoin = new Bitcoin(300)

bank.setNext(paypal)
paypal.setNext(bitcoin)
bank.pay(259)
```

### 8.ğŸ‘½ä¸­ä»‹è€…æ¨¡å¼(Mediator)

**äº¦ç§°ï¼š** è°ƒè§£äººã€æ§åˆ¶å™¨ã€Intermediaryã€Controller

#### ç°å®çš„ä¾‹å­

ä¸€ä¸ªä¸€èˆ¬çš„ä¾‹å­æ˜¯ï¼Œå½“ä½ ç”¨æ‰‹æœºå’ŒæŸäººäº¤è°ˆæ—¶ï¼Œæœ‰ä¸€ä¸ªç½‘ç»œæä¾›å•†ååœ¨ä½ å’Œä»–ä»¬ä¹‹é—´ï¼Œä½ çš„è°ˆè¯ç»è¿‡å®ƒè€Œä¸æ˜¯ç›´æ¥å‘é€ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œç½‘ç»œæä¾›è€…æ˜¯ä¸­ä»‹ã€‚

#### ç®€å•æ€»ç»“

**ä¸­ä»‹è€…æ¨¡å¼**æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ èƒ½è®©ä½ å‡å°‘å¯¹è±¡ä¹‹é—´æ··ä¹±æ— åºçš„ä¾èµ–å…³ç³»ã€‚ è¯¥æ¨¡å¼ä¼šé™åˆ¶å¯¹è±¡ä¹‹é—´çš„ç›´æ¥äº¤äº’ï¼Œ è¿«ä½¿å®ƒä»¬é€šè¿‡ä¸€ä¸ªä¸­ä»‹è€…å¯¹è±¡è¿›è¡Œåˆä½œã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

- *å•ä¸€èŒè´£åŸåˆ™*ã€‚ ä½ å¯ä»¥å°†å¤šä¸ªç»„ä»¶é—´çš„äº¤æµæŠ½å–åˆ°åŒä¸€ä½ç½®ï¼Œ ä½¿å…¶æ›´æ˜“äºç†è§£å’Œç»´æŠ¤ã€‚
-  *å¼€é—­åŸåˆ™*ã€‚ ä½ æ— éœ€ä¿®æ”¹å®é™…ç»„ä»¶å°±èƒ½å¢åŠ æ–°çš„ä¸­ä»‹è€…ã€‚
-  ä½ å¯ä»¥å‡è½»åº”ç”¨ä¸­å¤šä¸ªç»„ä»¶é—´çš„è€¦åˆæƒ…å†µã€‚
-  ä½ å¯ä»¥æ›´æ–¹ä¾¿åœ°å¤ç”¨å„ä¸ªç»„ä»¶ã€‚

**ç¼ºç‚¹**

ä¸€æ®µæ—¶é—´åï¼Œ ä¸­ä»‹è€…å¯èƒ½ä¼šæ¼”åŒ–æˆä¸º **ä¸Šå¸å¯¹è±¡**ï¼ˆä¸­ä»‹è€…æœ¬èº«ä¼šè¿‡äºå¤æ‚ï¼‰ã€‚

#### typescript example

```typescript
interface ChatRoomMediator {
  showMessage(user: User, message: string): void
}

class ChatRoom implements ChatRoomMediator {
  showMessage(user: User, message: string): void {
    const time = new Date().toUTCString()
    const sender = user.getName()
    console.log(`${time}[${sender}]:${message}`)
  }
}

class User {
  protected name: string
  protected chatMediator: ChatRoomMediator
  constructor(name: string, chatMediator: ChatRoomMediator) {
    this.name = name
    this.chatMediator = chatMediator
  }
  getName() {
    return this.name
  }
  send(message: string) {
    this.chatMediator.showMessage(this, message)
  }
}

const mediator = new ChatRoom()

const john = new User('John Doe', mediator)
const jane = new User('Jane Doe', mediator)

john.send('hi,its me')
jane.send('hey!')
```

### 9.ğŸ’¾å¤‡å¿˜å½•æ¨¡å¼(Memento)

**äº¦ç§°ï¼š** å¿«ç…§ã€Snapshot

#### ç°å®çš„ä¾‹å­

ä»¥è®¡ç®—å™¨ä¸ºä¾‹ï¼Œæ— è®ºä½•æ—¶ä½ æ‰§è¡Œä¸€äº›è®¡ç®—ï¼Œæœ€åçš„è®¡ç®—éƒ½ä¼šä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè¿™æ ·ä½ å°±å¯ä»¥ä½¿ç”¨æŸäº›æ“ä½œæŒ‰é’®è¿”å›è®¡ç®—å™¨å¹¶æ¢å¤å®ƒã€‚

#### ç®€å•æ€»ç»“

**å¤‡å¿˜å½•æ¨¡å¼**æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å…è®¸åœ¨ä¸æš´éœ²å¯¹è±¡å®ç°ç»†èŠ‚çš„æƒ…å†µä¸‹ä¿å­˜å’Œæ¢å¤å¯¹è±¡ä¹‹å‰çš„çŠ¶æ€ã€‚

#### é€‚åˆçš„ä½¿ç”¨åœºæ™¯

 å½“ä½ éœ€è¦åˆ›å»ºå¯¹è±¡çŠ¶æ€å¿«ç…§æ¥æ¢å¤å…¶ä¹‹å‰çš„çŠ¶æ€æ—¶ï¼Œ å¯ä»¥ä½¿ç”¨å¤‡å¿˜å½•æ¨¡å¼ã€‚

 å¤‡å¿˜å½•æ¨¡å¼å…è®¸ä½ å¤åˆ¶å¯¹è±¡ä¸­çš„å…¨éƒ¨çŠ¶æ€ ï¼ˆåŒ…æ‹¬ç§æœ‰æˆå‘˜å˜é‡ï¼‰ï¼Œ å¹¶å°†å…¶ç‹¬ç«‹äºå¯¹è±¡è¿›è¡Œä¿å­˜ã€‚ å°½ç®¡å¤§éƒ¨åˆ†äººå› ä¸º â€œæ’¤é”€â€ è¿™ä¸ªç”¨ä¾‹æ‰è®°å¾—è¯¥æ¨¡å¼ï¼Œ ä½†å…¶å®å®ƒåœ¨å¤„ç†äº‹åŠ¡ ï¼ˆæ¯”å¦‚éœ€è¦åœ¨å‡ºç°é”™è¯¯æ—¶å›æ»šä¸€ä¸ªæ“ä½œï¼‰ çš„è¿‡ç¨‹ä¸­ä¹Ÿå¿…ä¸å¯å°‘ã€‚

 å½“ç›´æ¥è®¿é—®å¯¹è±¡çš„æˆå‘˜å˜é‡ã€ è·å–å™¨æˆ–è®¾ç½®å™¨å°†å¯¼è‡´å°è£…è¢«çªç ´æ—¶ï¼Œ å¯ä»¥ä½¿ç”¨è¯¥æ¨¡å¼ã€‚

 å¤‡å¿˜å½•è®©å¯¹è±¡è‡ªè¡Œè´Ÿè´£åˆ›å»ºå…¶çŠ¶æ€çš„å¿«ç…§ã€‚ ä»»ä½•å…¶ä»–å¯¹è±¡éƒ½ä¸èƒ½è¯»å–å¿«ç…§ï¼Œ è¿™æœ‰æ•ˆåœ°ä¿éšœäº†æ•°æ®çš„å®‰å…¨æ€§ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

-  ä½ å¯ä»¥åœ¨ä¸ç ´åå¯¹è±¡å°è£…æƒ…å†µçš„å‰æä¸‹åˆ›å»ºå¯¹è±¡çŠ¶æ€å¿«ç…§ã€‚
-  ä½ å¯ä»¥é€šè¿‡è®©è´Ÿè´£äººç»´æŠ¤åŸå‘å™¨çŠ¶æ€å†å²è®°å½•æ¥ç®€åŒ–åŸå‘å™¨ä»£ç ã€‚

**ç¼ºç‚¹**

-  å¦‚æœå®¢æˆ·ç«¯è¿‡äºé¢‘ç¹åœ°åˆ›å»ºå¤‡å¿˜å½•ï¼Œ ç¨‹åºå°†æ¶ˆè€—å¤§é‡å†…å­˜ã€‚
-  è´Ÿè´£äººå¿…é¡»å®Œæ•´è·Ÿè¸ªåŸå‘å™¨çš„ç”Ÿå‘½å‘¨æœŸï¼Œ è¿™æ ·æ‰èƒ½é”€æ¯å¼ƒç”¨çš„å¤‡å¿˜å½•ã€‚
-  ç»å¤§éƒ¨åˆ†åŠ¨æ€ç¼–ç¨‹è¯­è¨€ ï¼ˆä¾‹å¦‚ PHPã€ Python å’Œ JavaScriptï¼‰ ä¸èƒ½ç¡®ä¿å¤‡å¿˜å½•ä¸­çš„çŠ¶æ€ä¸è¢«ä¿®æ”¹ã€‚

#### typescript example

```typescript
class EditorMemento {
  protected content: string
  constructor(content: string) {
    this.content = content
  }
  getContent() {
    return this.content
  }
}

class Editor {
  protected content = ''
  type(words: string) {
    this.content = this.content + words
  }
  getContent() {
    return this.content
  }
  save() {
    return new EditorMemento(this.content)
  }
  restore(memento: EditorMemento) {
    this.content = memento.getContent()
  }
}

const editor = new Editor()
editor.type('first sentence\n')
editor.type('this is second\n')
const saved = editor.save()

editor.type('third\n')
console.log(editor.getContent())
editor.restore(saved)
console.log(editor.getContent())

export {}

```

### 10.ğŸƒè®¿é—®è€…æ¨¡å¼(Visitor)

#### ç°å®çš„ä¾‹å­

è€ƒè™‘ä¸€ä¸‹å»è¿ªæ‹œæ—…æ¸¸çš„äººã€‚ä»–ä»¬åªéœ€è¦ä¸€ç§æ–¹å¼(å³ç­¾è¯)è¿›å…¥è¿ªæ‹œã€‚åˆ°è¾¾åï¼Œä»–ä»¬å¯ä»¥è‡ªå·±æ¥å‚è§‚è¿ªæ‹œçš„ä»»ä½•åœ°æ–¹ï¼Œè€Œä¸éœ€è¦ç”³è¯·è®¸å¯æˆ–è¡Œèµ°ä¸€å¤§æ®µè·ç¦»æ¥å‚è§‚è¿™é‡Œçš„ä»»ä½•åœ°æ–¹;åªè¦è®©ä»–ä»¬çŸ¥é“ä¸€ä¸ªåœ°æ–¹ï¼Œä»–ä»¬å°±å¯ä»¥å»å‚è§‚ã€‚è®¿å®¢æ¨¡å¼å¯ä»¥è®©ä½ åšåˆ°è¿™ä¸€ç‚¹ï¼Œå®ƒå¯ä»¥å¸®åŠ©ä½ æ·»åŠ è¦å‚è§‚çš„åœ°æ–¹ï¼Œè¿™æ ·ä»–ä»¬å¯ä»¥å°½å¯èƒ½å¤šåœ°å‚è§‚ï¼Œè€Œä¸å¿…åšä»»ä½•è·‘è…¿çš„å·¥ä½œ

#### ç®€å•æ€»ç»“

**è®¿é—®è€…æ¨¡å¼**æ˜¯ä¸€ç§è¡Œä¸ºè®¾è®¡æ¨¡å¼ï¼Œ å®ƒèƒ½å°†ç®—æ³•ä¸å…¶æ‰€ä½œç”¨çš„å¯¹è±¡éš”ç¦»å¼€æ¥ã€‚

#### ä¼˜ç¼ºç‚¹

**ä¼˜ç‚¹**

- *å¼€é—­åŸåˆ™*ã€‚ ä½ å¯ä»¥å¼•å…¥åœ¨ä¸åŒç±»å¯¹è±¡ä¸Šæ‰§è¡Œçš„æ–°è¡Œä¸ºï¼Œ ä¸”æ— éœ€å¯¹è¿™äº›ç±»åšå‡ºä¿®æ”¹ã€‚
-  *å•ä¸€èŒè´£åŸåˆ™*ã€‚ å¯å°†åŒä¸€è¡Œä¸ºçš„ä¸åŒç‰ˆæœ¬ç§»åˆ°åŒä¸€ä¸ªç±»ä¸­ã€‚
-  è®¿é—®è€…å¯¹è±¡å¯ä»¥åœ¨ä¸å„ç§å¯¹è±¡äº¤äº’æ—¶æ”¶é›†ä¸€äº›æœ‰ç”¨çš„ä¿¡æ¯ã€‚ å½“ä½ æƒ³è¦éå†ä¸€äº›å¤æ‚çš„å¯¹è±¡ç»“æ„ ï¼ˆä¾‹å¦‚å¯¹è±¡æ ‘ï¼‰ï¼Œ å¹¶åœ¨ç»“æ„ä¸­çš„æ¯ä¸ªå¯¹è±¡ä¸Šåº”ç”¨è®¿é—®è€…æ—¶ï¼Œ è¿™äº›ä¿¡æ¯å¯èƒ½ä¼šæœ‰æ‰€å¸®åŠ©ã€‚

**ç¼ºç‚¹**

-  æ¯æ¬¡åœ¨å…ƒç´ å±‚æ¬¡ç»“æ„ä¸­æ·»åŠ æˆ–ç§»é™¤ä¸€ä¸ªç±»æ—¶ï¼Œ ä½ éƒ½è¦æ›´æ–°æ‰€æœ‰çš„è®¿é—®è€…ã€‚
-  åœ¨è®¿é—®è€…åŒæŸä¸ªå…ƒç´ è¿›è¡Œäº¤äº’æ—¶ï¼Œ å®ƒä»¬å¯èƒ½æ²¡æœ‰è®¿é—®å…ƒç´ ç§æœ‰æˆå‘˜å˜é‡å’Œæ–¹æ³•çš„å¿…è¦æƒé™ã€‚

#### typescript example

```typescript
interface Animal {
  accept(operation: AnimalOperation): void
}

interface AnimalOperation {
  visitMonkey(monkey: Monkey): void
  visitLion(lion: Lion): void
  visitDolphin(dolphin: Dolphin): void
}

class Monkey implements Animal {
  shout() {
    console.log('Ooh oo aa aa!')
  }
  accept(operation: AnimalOperation) {
    operation.visitMonkey(this)
  }
}

class Lion implements Animal {
  accept(operation: AnimalOperation): void {
    operation.visitLion(this)
  }
  roar() {
    console.log('Roaaar!')
  }
}
class Dolphin implements Animal {
  accept(operation: AnimalOperation): void {
    operation.visitDolphin(this)
  }
  speak() {
    console.log('Tuut tuttu tuutt')
  }
}

class Speak implements AnimalOperation {
  visitMonkey(monkey: Monkey): void {
    monkey.shout()
  }
  visitLion(lion: Lion): void {
    lion.roar()
  }
  visitDolphin(dolphin: Dolphin): void {
    dolphin.speak()
  }
}

const monkey = new Monkey()
const lion = new Lion()
const dolphin = new Dolphin()
const speak = new Speak()
monkey.accept(speak)
lion.accept(speak)
dolphin.accept(speak)
export {}
```

